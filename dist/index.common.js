"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginVirtualTree = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            checked: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.filter(property).then(function (options) {
            if (options.length) {
              var option = options[0];
              option.data = _xeUtils["default"].get(row, property);
              option.checked = true;
            }
          }).then(function () {
            return $table.updateData();
          });
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _$table$getMouseCheck = $table.getMouseCheckeds(),
              columns = _$table$getMouseCheck.columns,
              rows = _$table$getMouseCheck.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: '.vxe-textarea',
    renderEdit: function renderEdit(h, editRender, params, _ref3) {
      var $excel = _ref3.$excel;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var row = params.row,
          column = params.column;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-input--wrapper vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的虚拟树表格
 */

var VXETablePluginVirtualTree = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-virtual-tree] >= V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginVirtualTree = VXETablePluginVirtualTree;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginVirtualTree);
}

var _default = VXETablePluginVirtualTree;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsIlhFVXRpbHMiLCJhc3NpZ24iLCJib3JkZXIiLCJyZXNpemFibGUiLCJzaG93T3ZlcmZsb3ciLCJjb250ZXh0TWVudSIsIm1vdXNlQ29uZmlnIiwic2VsZWN0ZWQiLCJjaGVja2VkIiwia2V5Ym9hcmRDb25maWciLCJpc0Fycm93IiwiaXNEZWwiLCJpc0VudGVyIiwiaXNUYWIiLCJpc0N1dCIsImlzRWRpdCIsIk9iamVjdCIsIm9wdGltaXphdGlvbiIsInNjcm9sbFgiLCJndCIsInNjcm9sbFkiLCJ3YXRjaCIsInZhbHVlIiwibG9hZENvbHVtbiIsIm1vdW50ZWQiLCJsZW5ndGgiLCJyZW5kZXIiLCJoIiwiJHNsb3RzIiwiJGxpc3RlbmVycyIsIm9uIiwiY29udGV4dE1lbnVDbGlja0V2ZW50IiwicmVmIiwibWV0aG9kcyIsIkNPTlRFWFRfTUVOVV9DTElDS19FVkVOVCIsImV2bnQiLCJtZW51Iiwicm93IiwiY29sdW1uIiwiJHRhYmxlIiwiJHJlZnMiLCJ4VGFibGUiLCJwcm9wZXJ0eSIsImhhbmRsZUNvcHllZCIsImhhbmRsZVBhc3RlIiwiaW5zZXJ0QXQiLCJyZW1vdmUiLCJjbGVhckRhdGEiLCJjbGVhckZpbHRlciIsImZpbHRlciIsInRoZW4iLCJvcHRpb24iLCJnZXQiLCJ1cGRhdGVEYXRhIiwiY2xlYXJTb3J0Iiwic29ydCIsImV4cG9ydERhdGEiLCJpc0hlYWRlciIsImdldE1vdXNlQ2hlY2tlZHMiLCJyb3dzIiwiZm9yRWFjaCIsImluZGV4T2YiLCJwdXNoIiwiQ0VMTF9TUEFOX01FVEhPRCIsInBhcmFtcyIsIiRyb3dJbmRleCIsInByZXZSb3ciLCJuZXh0Um93IiwiaXNNZXJnZWQiLCJyb3dzcGFuIiwiY29sc3BhbiIsImNvdW50Um93c3BhbiIsImVhY2giLCJjYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29tcG9uZW50Iiwicm93SGVpZ2h0IiwiZ2V0Q3Vyc29yUG9zaXRpb24iLCJ0ZXh0YXJlYSIsInJhbmdlRGF0YSIsInRleHQiLCJzdGFydCIsImVuZCIsInNldFNlbGVjdGlvblJhbmdlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRDdXJzb3JQb3NpdGlvbiIsImZvY3VzIiwicmVuZGVyTWFwIiwiY2VsbCIsImF1dG9mb2N1cyIsInJlbmRlckVkaXQiLCJlZGl0UmVuZGVyIiwiJGV4Y2VsIiwibW9kZWwiLCJzdHlsZSIsImhlaWdodCIsInJlbmRlckhlaWdodCIsIndpZHRoIiwicmVuZGVyV2lkdGgiLCJkb21Qcm9wcyIsImlucHV0IiwiaW5wRWxlbSIsInRhcmdldCIsInVwZGF0ZSIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiY2hhbmdlIiwia2V5ZG93biIsImFsdEtleSIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBvcyIsImNlbGxWYWx1ZSIsInNsaWNlIiwiTWF0aCIsImZsb29yIiwic2V0VGltZW91dCIsInJlbmRlckNlbGwiLCJpbm5lckhUTUwiLCJlc2NhcGUiLCJyZXBsYWNlIiwiVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSIsImluc3RhbGwiLCJ4dGFibGUiLCJyZW5kZXJlciIsInYiLCJFcnJvciIs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LFNBQWYsRUFOOEIsQ0FPOUI7O0FBQ0ExRyxJQUFBQSxpQkFBaUIsQ0FBQ2dKLE1BQUQsQ0FBakI7QUFDRDtBQVZzQyxDQUFsQzs7O0FBYVAsSUFBSSxPQUFPSyxNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxNQUFNLENBQUNDLFFBQTVDLEVBQXNEO0FBQ3BERCxFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEdBQWhCLENBQW9CVCx5QkFBcEI7QUFDRDs7ZUFFY0EseUIiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvbWV0aG9kcy94ZS11dGlscydcclxuaW1wb3J0IFZYRVRhYmxlIGZyb20gJ3Z4ZS10YWJsZS9saWIvdnhlLXRhYmxlJ1xyXG5cclxuY29uc3QgZXhjZWxFZGl0Q29uZmlnID0ge1xyXG4gIHRyaWdnZXI6ICdkYmxjbGljaycsXHJcbiAgbW9kZTogJ2NlbGwnLFxyXG4gIHNob3dJY29uOiBmYWxzZSxcclxuICBzaG93U3RhdHVzOiBmYWxzZVxyXG59XHJcblxyXG5jb25zdCBleGNlbENvbnRleHRNZW51ID0ge1xyXG4gIGhlYWRlcjoge1xyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2V4cG9ydEFsbCcsXHJcbiAgICAgICAgICBuYW1lOiAn6ZqQ6JeP5YiXJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2V4cG9ydEFsbCcsXHJcbiAgICAgICAgICBuYW1lOiAn5Y+W5raI5omA5pyJ6ZqQ6JePJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgXVxyXG4gIH0sXHJcbiAgYm9keToge1xyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2NsaXAnLFxyXG4gICAgICAgICAgbmFtZTogJ+WJqui0tChDdHJsK1gpJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2NvcHknLFxyXG4gICAgICAgICAgbmFtZTogJ+WkjeWItihDdHJsK0MpJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3Bhc3RlJyxcclxuICAgICAgICAgIG5hbWU6ICfnspjotLQoQ3RybCtWKSdcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnaW5zZXJ0JyxcclxuICAgICAgICAgIG5hbWU6ICfmj5LlhaUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAncmVtb3ZlJyxcclxuICAgICAgICAgIG5hbWU6ICfliKDpmaQnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY2xlYXJEYXRhJyxcclxuICAgICAgICAgIG5hbWU6ICfmuIXpmaTlhoXlrrkoRGVsKSdcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIC8vIFtcclxuICAgICAgLy8gICB7XHJcbiAgICAgIC8vICAgICBjb2RlOiAnbWVyZ2UnLFxyXG4gICAgICAvLyAgICAgbmFtZTogJ+WQiOW5tuWNleWFg+agvCdcclxuICAgICAgLy8gICB9XHJcbiAgICAgIC8vIF0sXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZmlsdGVyJyxcclxuICAgICAgICAgIG5hbWU6ICfnrZvpgIknLFxyXG4gICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdjbGVhckZpbHRlcicsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+a4hemZpOetm+mAiSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdmaWx0ZXJTZWxlY3QnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfmjInmiYDpgInljZXlhYPmoLznmoTlgLznrZvpgIknXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdzb3J0JyxcclxuICAgICAgICAgIG5hbWU6ICfmjpLluo8nLFxyXG4gICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdjbGVhclNvcnQnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfmuIXpmaTmjpLluo8nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnc29ydEFzYycsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+WNh+W6jydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdzb3J0RGVzYycsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+WAkuW6jydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+WvvOWHuuaVsOaNri5jc3YnXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBFWENFTF9NRVRIT0RTX05BTUUge1xyXG4gIENPTlRFWFRfTUVOVV9DTElDS19FVkVOVCA9ICdjb250ZXh0TWVudUNsaWNrRXZlbnQnLFxyXG4gIENFTExfU1BBTl9NRVRIT0QgPSAnY2VsbFNwYW5NZXRob2QnXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgdkV4Y2VsRGF0YSB7XHJcbiAgZXhjZWxTdG9yZToge1xyXG4gICAgdXBsb2FkUm93czogQXJyYXk8YW55PjtcclxuICB9XHJcbiAgbWVyZ2VTdG9yZToge1xyXG4gICAgY29sTGlzdDogQXJyYXk8YW55PjtcclxuICAgIHJvd0xpc3Q6IEFycmF5PGFueT47XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudCAoeyBWdWUsIFRhYmxlIH06IGFueSkge1xyXG4gIGNvbnN0IEV4Y2VsOiBhbnkgPSB7XHJcbiAgICBuYW1lOiAnVnhlRXhjZWwnLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgY29sdW1uczogQXJyYXlcclxuICAgIH0sXHJcbiAgICBkYXRhICgpIHtcclxuICAgICAgbGV0IGRhdGE6IHZFeGNlbERhdGEgPSB7XHJcbiAgICAgICAgZXhjZWxTdG9yZToge1xyXG4gICAgICAgICAgdXBsb2FkUm93czogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lcmdlU3RvcmU6IHtcclxuICAgICAgICAgIGNvbExpc3Q6IFtdLFxyXG4gICAgICAgICAgcm93TGlzdDogW11cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGFcclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICB0YWJsZVByb3BzICh0aGlzOiBhbnkpOiBhbnkge1xyXG4gICAgICAgIGxldCB7ICRwcm9wcywgZWRpdENvbmZpZyB9ID0gdGhpc1xyXG4gICAgICAgIHJldHVybiBYRVV0aWxzLmFzc2lnbih7fSwgJHByb3BzLCB7XHJcbiAgICAgICAgICBib3JkZXI6IHRydWUsXHJcbiAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICBzaG93T3ZlcmZsb3c6IG51bGwsXHJcbiAgICAgICAgICAvLyBzcGFuTWV0aG9kOiB0aGlzLmNlbGxTcGFuTWV0aG9kLFxyXG4gICAgICAgICAgY29udGV4dE1lbnU6IGV4Y2VsQ29udGV4dE1lbnUsXHJcbiAgICAgICAgICBtb3VzZUNvbmZpZzogeyBzZWxlY3RlZDogdHJ1ZSwgY2hlY2tlZDogdHJ1ZSB9LFxyXG4gICAgICAgICAga2V5Ym9hcmRDb25maWc6IHsgaXNBcnJvdzogdHJ1ZSwgaXNEZWw6IHRydWUsIGlzRW50ZXI6IHRydWUsIGlzVGFiOiB0cnVlLCBpc0N1dDogdHJ1ZSwgaXNFZGl0OiB0cnVlIH0sXHJcbiAgICAgICAgICBlZGl0Q29uZmlnOiBPYmplY3QuYXNzaWduKHt9LCBleGNlbEVkaXRDb25maWcsIGVkaXRDb25maWcpLFxyXG4gICAgICAgICAgb3B0aW1pemF0aW9uOiB7XHJcbiAgICAgICAgICAgIHNjcm9sbFg6IHtcclxuICAgICAgICAgICAgICBndDogMTAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjcm9sbFk6IHtcclxuICAgICAgICAgICAgICBndDogMTAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgd2F0Y2g6IHtcclxuICAgICAgY29sdW1ucyAodGhpczogYW55LCB2YWx1ZTogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIHRoaXMubG9hZENvbHVtbih2YWx1ZSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQgKHRoaXM6IGFueSkge1xyXG4gICAgICBsZXQgeyBjb2x1bW5zIH0gPSB0aGlzXHJcbiAgICAgIGlmIChjb2x1bW5zICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkQ29sdW1uKHRoaXMuY29sdW1ucylcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHJlbmRlciAodGhpczogYW55LCBoOiBGdW5jdGlvbikge1xyXG4gICAgICBsZXQgeyAkc2xvdHMsICRsaXN0ZW5lcnMsIHRhYmxlUHJvcHMgfSA9IHRoaXNcclxuICAgICAgcmV0dXJuIGgoJ3Z4ZS10YWJsZScsIHtcclxuICAgICAgICBjbGFzczogJ3Z4ZS1leGNlbCcsXHJcbiAgICAgICAgcHJvcHM6IHRhYmxlUHJvcHMsXHJcbiAgICAgICAgb246IFhFVXRpbHMuYXNzaWduKHt9LCAkbGlzdGVuZXJzLCB7XHJcbiAgICAgICAgICAnY29udGV4dC1tZW51LWNsaWNrJzogdGhpcy5jb250ZXh0TWVudUNsaWNrRXZlbnRcclxuICAgICAgICB9KSxcclxuICAgICAgICByZWY6ICd4VGFibGUnXHJcbiAgICAgIH0sICRzbG90cy5kZWZhdWx0KVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DT05URVhUX01FTlVfQ0xJQ0tfRVZFTlRdICh0aGlzOiBhbnksIHsgbWVudSwgcm93LCBjb2x1bW4gfTogYW55LCBldm50OiBhbnkpIHtcclxuICAgICAgICBsZXQgJHRhYmxlID0gdGhpcy4kcmVmcy54VGFibGVcclxuICAgICAgICBsZXQgeyBwcm9wZXJ0eSB9ID0gY29sdW1uXHJcbiAgICAgICAgc3dpdGNoIChtZW51LmNvZGUpIHtcclxuICAgICAgICAgIGNhc2UgJ2NsaXAnOlxyXG4gICAgICAgICAgICAkdGFibGUuaGFuZGxlQ29weWVkKHRydWUsIGV2bnQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjb3B5JzpcclxuICAgICAgICAgICAgJHRhYmxlLmhhbmRsZUNvcHllZChmYWxzZSwgZXZudClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3Bhc3RlJzpcclxuICAgICAgICAgICAgJHRhYmxlLmhhbmRsZVBhc3RlKGV2bnQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdpbnNlcnQnOlxyXG4gICAgICAgICAgICAkdGFibGUuaW5zZXJ0QXQoe30sIHJvdylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3JlbW92ZSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5yZW1vdmUocm93KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY2xlYXJEYXRhJzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyRGF0YShyb3csIHByb3BlcnR5KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY2xlYXJGaWx0ZXInOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJGaWx0ZXIoY29sdW1uKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnZmlsdGVyU2VsZWN0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmZpbHRlcihwcm9wZXJ0eSlcclxuICAgICAgICAgICAgICAudGhlbigob3B0aW9uczogQXJyYXk8YW55PikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBvcHRpb25zWzBdXHJcbiAgICAgICAgICAgICAgICAgIG9wdGlvbi5kYXRhID0gWEVVdGlscy5nZXQocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgICAgICAgICAgb3B0aW9uLmNoZWNrZWQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiAkdGFibGUudXBkYXRlRGF0YSgpKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY2xlYXJTb3J0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyU29ydCgpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdzb3J0QXNjJzpcclxuICAgICAgICAgICAgJHRhYmxlLnNvcnQocHJvcGVydHksICdhc2MnKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnc29ydERlc2MnOlxyXG4gICAgICAgICAgICAkdGFibGUuc29ydChwcm9wZXJ0eSwgJ2Rlc2MnKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnZXhwb3J0QWxsJzpcclxuICAgICAgICAgICAgJHRhYmxlLmV4cG9ydERhdGEoeyBpc0hlYWRlcjogZmFsc2UgfSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgY29uc3QgeyBjb2x1bW5zLCByb3dzIH0gPSAkdGFibGUuZ2V0TW91c2VDaGVja2VkcygpXHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29sTGlzdCwgcm93TGlzdCB9ID0gdGhpcy5tZXJnZVN0b3JlXHJcbiAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHJvd3MuZm9yRWFjaCgocm93OiBhbnkpID0+IHJvd0xpc3QuaW5kZXhPZihyb3cpID09PSAtMSA/IHJvd0xpc3QucHVzaChyb3cpIDogMClcclxuICAgICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbjogYW55KSA9PiBjb2xMaXN0LmluZGV4T2YoY29sdW1uKSA9PT0gLTEgPyBjb2xMaXN0LnB1c2goY29sdW1uKSA6IDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFtFWENFTF9NRVRIT0RTX05BTUUuQ0VMTF9TUEFOX01FVEhPRF0gKHRoaXM6IGFueSwgcGFyYW1zOiBhbnkpIHtcclxuICAgICAgICBsZXQgeyByb3csICRyb3dJbmRleCwgY29sdW1uLCBkYXRhIH0gPSBwYXJhbXNcclxuICAgICAgICBjb25zdCB7IGNvbExpc3QsIHJvd0xpc3QgfSA9IHRoaXMubWVyZ2VTdG9yZVxyXG4gICAgICAgIGlmIChjb2xMaXN0LmluZGV4T2YoY29sdW1uKSA+IC0xKSB7XHJcbiAgICAgICAgICBsZXQgcHJldlJvdyA9IGRhdGFbJHJvd0luZGV4IC0gMV1cclxuICAgICAgICAgIGxldCBuZXh0Um93ID0gZGF0YVskcm93SW5kZXggKyAxXVxyXG4gICAgICAgICAgbGV0IGlzTWVyZ2VkID0gcm93TGlzdC5pbmRleE9mKHJvdykgPiAtMVxyXG4gICAgICAgICAgaWYgKHByZXZSb3cgJiYgaXNNZXJnZWQgJiYgcm93TGlzdC5pbmRleE9mKHByZXZSb3cpID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgcm93c3BhbjogMCwgY29sc3BhbjogMCB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgY291bnRSb3dzcGFuID0gMVxyXG4gICAgICAgICAgICBpZiAoaXNNZXJnZWQpIHtcclxuICAgICAgICAgICAgICB3aGlsZSAobmV4dFJvdyAmJiByb3dMaXN0LmluZGV4T2YobmV4dFJvdykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgbmV4dFJvdyA9IGRhdGFbKytjb3VudFJvd3NwYW4gKyAkcm93SW5kZXhdXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb3VudFJvd3NwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgcm93c3BhbjogY291bnRSb3dzcGFuLCBjb2xzcGFuOiAxIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvLyDnu6fmib8gVGFibGVcclxuICBYRVV0aWxzLmFzc2lnbihFeGNlbC5wcm9wcywgVGFibGUucHJvcHMpXHJcbiAgWEVVdGlscy5lYWNoKFRhYmxlLm1ldGhvZHMsIChjYjogRnVuY3Rpb24sIG5hbWU6IEVYQ0VMX01FVEhPRFNfTkFNRSkgPT4ge1xyXG4gICAgRXhjZWwubWV0aG9kc1tuYW1lXSA9IGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuJHJlZnMueFRhYmxlW25hbWVdLmFwcGx5KHRoaXMuJHJlZnMueFRhYmxlLCBhcmd1bWVudHMpXHJcbiAgICB9XHJcbiAgfSlcclxuICBWdWUuY29tcG9uZW50KEV4Y2VsLm5hbWUsIEV4Y2VsKVxyXG59XHJcblxyXG5jb25zdCByb3dIZWlnaHQ6IG51bWJlciA9IDI0XHJcblxyXG5pbnRlcmZhY2UgcG9zUmFuZ2VEYXRhIHtcclxuICB0ZXh0OiBzdHJpbmc7XHJcbiAgc3RhcnQ6IG51bWJlcjtcclxuICBlbmQ6IG51bWJlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q3Vyc29yUG9zaXRpb24gKHRleHRhcmVhOiBhbnkpOiBwb3NSYW5nZURhdGEge1xyXG4gIGxldCByYW5nZURhdGE6IHBvc1JhbmdlRGF0YSA9IHsgdGV4dDogJycsIHN0YXJ0OiAwLCBlbmQ6IDAgfVxyXG4gIGlmICh0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgcmFuZ2VEYXRhLnN0YXJ0ID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnRcclxuICAgIHJhbmdlRGF0YS5lbmQgPSB0ZXh0YXJlYS5zZWxlY3Rpb25FbmRcclxuICB9XHJcbiAgcmV0dXJuIHJhbmdlRGF0YVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IGFueSwgcmFuZ2VEYXRhOiBwb3NSYW5nZURhdGEpIHtcclxuICBpZiAodGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIHRleHRhcmVhLmZvY3VzKClcclxuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlRGF0YS5zdGFydCwgcmFuZ2VEYXRhLmVuZClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Plh73mlbBcclxuICovXHJcbmNvbnN0IHJlbmRlck1hcCA9IHtcclxuICBjZWxsOiB7XHJcbiAgICBhdXRvZm9jdXM6ICcudnhlLXRleHRhcmVhJyxcclxuICAgIHJlbmRlckVkaXQgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55LCB7ICRleGNlbCB9OiBhbnkpIHtcclxuICAgICAgbGV0IHsgZXhjZWxTdG9yZSB9ID0gJGV4Y2VsXHJcbiAgICAgIGxldCB7IHVwbG9hZFJvd3MgfSA9IGV4Y2VsU3RvcmVcclxuICAgICAgbGV0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICBsZXQgeyBtb2RlbCB9ID0gY29sdW1uXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgY2xhc3M6ICd2eGUtaW5wdXQtLXdyYXBwZXIgdnhlLWV4Y2VsLWNlbGwnLFxyXG4gICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtjb2x1bW4ucmVuZGVySGVpZ2h0fXB4YFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIFtcclxuICAgICAgICAgIGgoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS10ZXh0YXJlYScsXHJcbiAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IGAke2NvbHVtbi5yZW5kZXJXaWR0aH1weGBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZG9tUHJvcHM6IHtcclxuICAgICAgICAgICAgICB2YWx1ZTogbW9kZWwudmFsdWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICBpbnB1dCAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wRWxlbSA9IGV2bnQudGFyZ2V0XHJcbiAgICAgICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGlucEVsZW0udmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChpbnBFbGVtLnNjcm9sbEhlaWdodCA+IGlucEVsZW0ub2Zmc2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSb3dzLmluZGV4T2Yocm93KSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLndpZHRoID0gYCR7aW5wRWxlbS5vZmZzZXRXaWR0aCArIDIwfXB4YFxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7aW5wRWxlbS5zY3JvbGxIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGNoYW5nZSAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVwbG9hZFJvd3MucHVzaChyb3cpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBrZXlkb3duIChldm50OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnBFbGVtID0gZXZudC50YXJnZXRcclxuICAgICAgICAgICAgICAgIGlmIChldm50LmFsdEtleSAmJiBldm50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGV2bnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICBldm50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgIGxldCByYW5nZURhdGEgPSBnZXRDdXJzb3JQb3NpdGlvbihpbnBFbGVtKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgcG9zID0gcmFuZ2VEYXRhLmVuZFxyXG4gICAgICAgICAgICAgICAgICBsZXQgY2VsbFZhbHVlID0gaW5wRWxlbS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICBjZWxsVmFsdWUgPSBgJHtjZWxsVmFsdWUuc2xpY2UoMCwgcG9zKX1cXG4ke2NlbGxWYWx1ZS5zbGljZShwb3MsIGNlbGxWYWx1ZS5sZW5ndGgpfWBcclxuICAgICAgICAgICAgICAgICAgaW5wRWxlbS52YWx1ZSA9IGNlbGxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIG1vZGVsLnZhbHVlID0gY2VsbFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIGlucEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7KE1hdGguZmxvb3IoaW5wRWxlbS5vZmZzZXRIZWlnaHQgLyByb3dIZWlnaHQpICsgMSkgKiByb3dIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlRGF0YS5zdGFydCA9IHJhbmdlRGF0YS5lbmQgPSArK3Bvc1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnNvclBvc2l0aW9uKGlucEVsZW0sIHJhbmdlRGF0YSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgXSlcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIHJlbmRlckNlbGwgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55KSB7XHJcbiAgICAgIGxldCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgICAgZG9tUHJvcHM6IHtcclxuICAgICAgICAgICAgaW5uZXJIVE1MOiBYRVV0aWxzLmVzY2FwZShYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSkpLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgXVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE5aKe5by65o+S5Lu277yM5a6e546w566A5Y2V55qE6Jma5ouf5qCR6KGo5qC8XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSA9IHtcclxuICBpbnN0YWxsICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgbGV0IHsgcmVuZGVyZXIsIHYgfSA9IHh0YWJsZVxyXG4gICAgaWYgKHYgPT09ICd2MScpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbdnhlLXRhYmxlLXBsdWdpbi12aXJ0dWFsLXRyZWVdID49IFYyIHZlcnNpb24gaXMgcmVxdWlyZWQuJylcclxuICAgIH1cclxuICAgIC8vIOa3u+WKoOWIsOa4suafk+WZqFxyXG4gICAgcmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKVxyXG4gICAgLy8g5rOo5YaM57uE5Lu2XHJcbiAgICByZWdpc3RlckNvbXBvbmVudCh4dGFibGUpXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlXHJcbiJdfQ==
