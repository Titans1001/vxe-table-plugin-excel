"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginExcel = exports.Excel = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

var _methods;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// import { VXETable } from 'vxe-table'
var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

var Excel = {
  name: 'VxeExcel',
  props: {
    columns: Array
  },
  data: function data() {
    var data = {
      excelStore: {
        uploadRows: []
      },
      mergeStore: {
        colList: [],
        rowList: []
      }
    };
    return data;
  },
  computed: {
    tableProps: function tableProps() {
      var $props = this.$props,
          editConfig = this.editConfig;
      return _xeUtils["default"].assign({}, $props, {
        border: true,
        resizable: true,
        showOverflow: null,
        // spanMethod: this.cellSpanMethod,
        contextMenu: excelContextMenu,
        mouseConfig: {
          selected: true,
          checked: true
        },
        keyboardConfig: {
          isArrow: true,
          isDel: true,
          isTab: true,
          isCut: true,
          isEdit: true
        },
        editConfig: Object.assign({}, excelEditConfig, editConfig),
        optimization: {
          scrollX: {
            gt: 100,
            oSize: 6,
            rSize: 20
          },
          scrollY: {
            gt: 100,
            oSize: 30,
            rSize: 80
          }
        }
      });
    }
  },
  watch: {
    columns: function columns(value) {
      this.loadColumn(value);
    }
  },
  mounted: function mounted() {
    var columns = this.columns;

    if (columns && columns.length) {
      this.loadColumn(this.columns);
    }
  },
  render: function render(h) {
    var $slots = this.$slots,
        $listeners = this.$listeners,
        tableProps = this.tableProps;
    return h('vxe-table', {
      "class": 'vxe-excel',
      props: tableProps,
      on: _xeUtils["default"].assign({}, $listeners, {
        'context-menu-click': this.contextMenuClickEvent
      }),
      ref: 'xTable'
    }, $slots["default"]);
  },
  methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref, evnt) {
    var menu = _ref.menu,
        row = _ref.row,
        column = _ref.column;
    var $table = this.$refs.xTable;
    var property = column.property;

    switch (menu.code) {
      case 'clip':
        $table.handleCopyed(true, evnt);
        break;

      case 'copy':
        $table.handleCopyed(false, evnt);
        break;

      case 'paste':
        $table.handlePaste(evnt);
        break;

      case 'insert':
        $table.insertAt({}, row);
        break;

      case 'remove':
        $table.remove(row);
        break;

      case 'clearData':
        $table.clearData(row, property);
        break;

      case 'clearFilter':
        $table.clearFilter(column);
        break;

      case 'filterSelect':
        $table.filter(property).then(function (options) {
          if (options.length) {
            var option = options[0];
            option.data = _xeUtils["default"].get(row, property);
            option.checked = true;
          }
        }).then(function () {
          return $table.updateData();
        });
        break;

      case 'clearSort':
        $table.clearSort();
        break;

      case 'sortAsc':
        $table.sort(property, 'asc');
        break;

      case 'sortDesc':
        $table.sort(property, 'desc');
        break;

      case 'exportAll':
        $table.exportCsv({
          isHeader: false
        });
        break;

      case 'merge':
        var _$table$getMouseCheck = $table.getMouseCheckeds(),
            columns = _$table$getMouseCheck.columns,
            rows = _$table$getMouseCheck.rows;

        var _this$mergeStore = this.mergeStore,
            colList = _this$mergeStore.colList,
            rowList = _this$mergeStore.rowList;

        if (rows.length && columns.length) {
          rows.forEach(function (row) {
            return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
          });
          columns.forEach(function (column) {
            return colList.indexOf(column) === -1 ? colList.push(column) : 0;
          });
        }

        break;
    }
  }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
    var row = params.row,
        $rowIndex = params.$rowIndex,
        column = params.column,
        data = params.data;
    var _this$mergeStore2 = this.mergeStore,
        colList = _this$mergeStore2.colList,
        rowList = _this$mergeStore2.rowList;

    if (colList.indexOf(column) > -1) {
      var prevRow = data[$rowIndex - 1];
      var nextRow = data[$rowIndex + 1];
      var isMerged = rowList.indexOf(row) > -1;

      if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
        return {
          rowspan: 0,
          colspan: 0
        };
      } else {
        var countRowspan = 1;

        if (isMerged) {
          while (nextRow && rowList.indexOf(nextRow) > -1) {
            nextRow = data[++countRowspan + $rowIndex];
          }
        }

        if (countRowspan > 1) {
          return {
            rowspan: countRowspan,
            colspan: 1
          };
        }
      }
    }
  }), _methods)
};
exports.Excel = Excel;
var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: '.vxe-textarea',
    renderEdit: function renderEdit(h, editRender, params, _ref2) {
      var $excel = _ref2.$excel;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var row = params.row,
          column = params.column;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-input--wrapper vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight - 1, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的 Excel 表格
 */

var VXETablePluginExcel = {
  install: function install(xtable) {
    var Vue = xtable.Vue,
        Table = xtable.Table,
        renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-excel] >= V2 version is required.');
    } // 继承 Table


    _xeUtils["default"].assign(Excel.props, Table.props);

    _xeUtils["default"].each(Table.methods, function (cb, name) {
      Excel.methods[name] = function () {
        return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
      };
    }); // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    Vue.component(Excel.name, Excel);
  }
};
exports.VXETablePluginExcel = VXETablePluginExcel;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginExcel);
}

var _default = VXETablePluginExcel;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsIkV4Y2VsIiwicHJvcHMiLCJjb2x1bW5zIiwiQXJyYXkiLCJkYXRhIiwiZXhjZWxTdG9yZSIsInVwbG9hZFJvd3MiLCJtZXJnZVN0b3JlIiwiY29sTGlzdCIsInJvd0xpc3QiLCJjb21wdXRlZCIsInRhYmxlUHJvcHMiLCIkcHJvcHMiLCJlZGl0Q29uZmlnIiwiWEVVdGlscyIsImFzc2lnbiIsImJvcmRlciIsInJlc2l6YWJsZSIsInNob3dPdmVyZmxvdyIsImNvbnRleHRNZW51IiwibW91c2VDb25maWciLCJzZWxlY3RlZCIsImNoZWNrZWQiLCJrZXlib2FyZENvbmZpZyIsImlzQXJyb3ciLCJpc0RlbCIsImlzVGFiIiwiaXNDdXQiLCJpc0VkaXQiLCJPYmplY3QiLCJvcHRpbWl6YXRpb24iLCJzY3JvbGxYIiwiZ3QiLCJvU2l6ZSIsInJTaXplIiwic2Nyb2xsWSIsIndhdGNoIiwidmFsdWUiLCJsb2FkQ29sdW1uIiwibW91bnRlZCIsImxlbmd0aCIsInJlbmRlciIsImgiLCIkc2xvdHMiLCIkbGlzdGVuZXJzIiwib24iLCJjb250ZXh0TWVudUNsaWNrRXZlbnQiLCJyZWYiLCJtZXRob2RzIiwiQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UIiwiZXZudCIsIm1lbnUiLCJyb3ciLCJjb2x1bW4iLCIkdGFibGUiLCIkcmVmcyIsInhUYWJsZSIsInByb3BlcnR5IiwiaGFuZGxlQ29weWVkIiwiaGFuZGxlUGFzdGUiLCJpbnNlcnRBdCIsInJlbW92ZSIsImNsZWFyRGF0YSIsImNsZWFyRmlsdGVyIiwiZmlsdGVyIiwidGhlbiIsIm9wdGlvbiIsImdldCIsInVwZGF0ZURhdGEiLCJjbGVhclNvcnQiLCJzb3J0IiwiZXhwb3J0Q3N2IiwiaXNIZWFkZXIiLCJnZXRNb3VzZUNoZWNrZWRzIiwicm93cyIsImZvckVhY2giLCJpbmRleE9mIiwicHVzaCIsIkNFTExfU1BBTl9NRVRIT0QiLCJwYXJhbXMiLCIkcm93SW5kZXgiLCJwcmV2Um93IiwibmV4dFJvdyIsImlzTWVyZ2VkIiwicm93c3BhbiIsImNvbHNwYW4iLCJjb3VudFJvd3NwYW4iLCJyb3dIZWlnaHQiLCJnZXRDdXJzb3JQb3NpdGlvbiIsInRleHRhcmVhIiwicmFuZ2VEYXRhIiwidGV4dCIsInN0YXJ0IiwiZW5kIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsInNldEN1cnNvclBvc2l0aW9uIiwiZm9jdXMiLCJyZW5kZXJNYXAiLCJjZWxsIiwiYXV0b2ZvY3VzIiwicmVuZGVyRWRpdCIsImVkaXRSZW5kZXIiLCIkZXhjZWwiLCJtb2RlbCIsInN0eWxlIiwiaGVpZ2h0IiwicmVuZGVySGVpZ2h0Iiwid2lkdGgiLCJyZW5kZXJXaWR0aCIsImRvbVByb3BzIiwiaW5wdXQiLCJpbnBFbGVtIiwidGFyZ2V0IiwidXBkYXRlIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJjaGFuZ2UiLCJrZXlkb3duIiwiYWx0S2V5Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicG9zIiwiY2VsbFZhbHVlIiwic2xpY2UiLCJNYXRoIiwiZmxvb3IiLCJzZXRUaW1lb3V0IiwicmVuZGVyQ2VsbCIsImlubmVySFRNTCIsImVzY2FwZSIsInJlcGxhY2UiLCJWWEVUYWJsZVBsdWdpbkV4Y2VsIiwiaW5zdGFsbCIsInh0YWJsZSIsIlZ1ZSIsIlRhYmxlIiwicmVuZGVyZXIiLCJ2IiwiRXJyb3IiLCJlYWNoIiwiY2IiLCJhcHBseSIsImFyZ3VtZW50cyIsIm1peGluIiwiY29tcG9uZW50Iiwid2luZG93IiwiVlhF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bEI7O0FBQ0F1QyxJQUFBQSxHQUFHLENBQUNVLFNBQUosQ0FBY3BKLEtBQUssQ0FBQ0osSUFBcEIsRUFBMEJJLEtBQTFCO0FBQ0Q7QUFqQmdDLENBQTVCOzs7QUEwQlAsSUFBSSxPQUFPcUosTUFBUCxLQUFrQixXQUFsQixJQUFpQ0EsTUFBTSxDQUFDQyxRQUE1QyxFQUFzRDtBQUNwREQsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUFoQixDQUFvQmhCLG1CQUFwQjtBQUNEOztlQUVjQSxtQiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG4vLyBpbXBvcnQgeyBWWEVUYWJsZSB9IGZyb20gJ3Z4ZS10YWJsZSdcclxuXHJcbmNvbnN0IGV4Y2VsRWRpdENvbmZpZyA9IHtcclxuICB0cmlnZ2VyOiAnZGJsY2xpY2snLFxyXG4gIG1vZGU6ICdjZWxsJyxcclxuICBzaG93SWNvbjogZmFsc2UsXHJcbiAgc2hvd1N0YXR1czogZmFsc2VcclxufVxyXG5cclxuY29uc3QgZXhjZWxDb250ZXh0TWVudSA9IHtcclxuICBoZWFkZXI6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+makOiXj+WIlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+WPlua2iOaJgOaciemakOiXjydcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9LFxyXG4gIGJvZHk6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGlwJyxcclxuICAgICAgICAgIG5hbWU6ICfliarotLQoQ3RybCtYKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjb3B5JyxcclxuICAgICAgICAgIG5hbWU6ICflpI3liLYoQ3RybCtDKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdwYXN0ZScsXHJcbiAgICAgICAgICBuYW1lOiAn57KY6LS0KEN0cmwrViknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2luc2VydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o+S5YWlJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3JlbW92ZScsXHJcbiAgICAgICAgICBuYW1lOiAn5Yig6ZmkJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2NsZWFyRGF0YScsXHJcbiAgICAgICAgICBuYW1lOiAn5riF6Zmk5YaF5a65KERlbCknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICAvLyBbXHJcbiAgICAgIC8vICAge1xyXG4gICAgICAvLyAgICAgY29kZTogJ21lcmdlJyxcclxuICAgICAgLy8gICAgIG5hbWU6ICflkIjlubbljZXlhYPmoLwnXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2ZpbHRlcicsXHJcbiAgICAgICAgICBuYW1lOiAn562b6YCJJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJGaWx0ZXInLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfmuIXpmaTnrZvpgIknXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnZmlsdGVyU2VsZWN0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5oyJ5omA6YCJ5Y2V5YWD5qC855qE5YC8562b6YCJJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnc29ydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o6S5bqPJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJTb3J0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk5o6S5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnRBc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfljYfluo8nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnc29ydERlc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICflgJLluo8nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflr7zlh7rmlbDmja4uY3N2J1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gRVhDRUxfTUVUSE9EU19OQU1FIHtcclxuICBDT05URVhUX01FTlVfQ0xJQ0tfRVZFTlQgPSAnY29udGV4dE1lbnVDbGlja0V2ZW50JyxcclxuICBDRUxMX1NQQU5fTUVUSE9EID0gJ2NlbGxTcGFuTWV0aG9kJ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIHZFeGNlbERhdGEge1xyXG4gIGV4Y2VsU3RvcmU6IHtcclxuICAgIHVwbG9hZFJvd3M6IEFycmF5PGFueT47XHJcbiAgfVxyXG4gIG1lcmdlU3RvcmU6IHtcclxuICAgIGNvbExpc3Q6IEFycmF5PGFueT47XHJcbiAgICByb3dMaXN0OiBBcnJheTxhbnk+O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEV4Y2VsID0ge1xyXG4gIG5hbWU6ICdWeGVFeGNlbCcsXHJcbiAgcHJvcHM6IHtcclxuICAgIGNvbHVtbnM6IEFycmF5XHJcbiAgfSxcclxuICBkYXRhICgpIHtcclxuICAgIGxldCBkYXRhOiB2RXhjZWxEYXRhID0gIHtcclxuICAgICAgZXhjZWxTdG9yZToge1xyXG4gICAgICAgIHVwbG9hZFJvd3M6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIG1lcmdlU3RvcmU6IHtcclxuICAgICAgICBjb2xMaXN0OiBbXSxcclxuICAgICAgICByb3dMaXN0OiBbXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH0sXHJcbiAgY29tcHV0ZWQ6IHtcclxuICAgIHRhYmxlUHJvcHMgKCkge1xyXG4gICAgICBsZXQgeyAkcHJvcHMsIGVkaXRDb25maWcgfSA9IHRoaXNcclxuICAgICAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCAkcHJvcHMsIHtcclxuICAgICAgICBib3JkZXI6IHRydWUsXHJcbiAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgIHNob3dPdmVyZmxvdzogbnVsbCxcclxuICAgICAgICAvLyBzcGFuTWV0aG9kOiB0aGlzLmNlbGxTcGFuTWV0aG9kLFxyXG4gICAgICAgIGNvbnRleHRNZW51OiBleGNlbENvbnRleHRNZW51LFxyXG4gICAgICAgIG1vdXNlQ29uZmlnOiB7IHNlbGVjdGVkOiB0cnVlLCBjaGVja2VkOiB0cnVlIH0sXHJcbiAgICAgICAga2V5Ym9hcmRDb25maWc6IHsgaXNBcnJvdzogdHJ1ZSwgaXNEZWw6IHRydWUsIGlzVGFiOiB0cnVlLCBpc0N1dDogdHJ1ZSwgaXNFZGl0OiB0cnVlIH0sXHJcbiAgICAgICAgZWRpdENvbmZpZzogT2JqZWN0LmFzc2lnbih7fSwgZXhjZWxFZGl0Q29uZmlnLCBlZGl0Q29uZmlnKSxcclxuICAgICAgICBvcHRpbWl6YXRpb246IHtcclxuICAgICAgICAgIHNjcm9sbFg6IHtcclxuICAgICAgICAgICAgZ3Q6IDEwMCxcclxuICAgICAgICAgICAgb1NpemU6IDYsXHJcbiAgICAgICAgICAgIHJTaXplOiAyMFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNjcm9sbFk6IHtcclxuICAgICAgICAgICAgZ3Q6IDEwMCxcclxuICAgICAgICAgICAgb1NpemU6IDMwLFxyXG4gICAgICAgICAgICByU2l6ZTogODBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfSxcclxuICB3YXRjaDoge1xyXG4gICAgY29sdW1ucyAodmFsdWU6IEFycmF5PGFueT4pIHtcclxuICAgICAgdGhpcy5sb2FkQ29sdW1uKHZhbHVlKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgbW91bnRlZCAoKSB7XHJcbiAgICBsZXQgeyBjb2x1bW5zIH0gPSB0aGlzXHJcbiAgICBpZiAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmxvYWRDb2x1bW4odGhpcy5jb2x1bW5zKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVuZGVyIChoOiBGdW5jdGlvbikge1xyXG4gICAgbGV0IHsgJHNsb3RzLCAkbGlzdGVuZXJzLCB0YWJsZVByb3BzIH0gPSB0aGlzXHJcbiAgICByZXR1cm4gaCgndnhlLXRhYmxlJywge1xyXG4gICAgICBjbGFzczogJ3Z4ZS1leGNlbCcsXHJcbiAgICAgIHByb3BzOiB0YWJsZVByb3BzLFxyXG4gICAgICBvbjogWEVVdGlscy5hc3NpZ24oe30sICRsaXN0ZW5lcnMsIHtcclxuICAgICAgICAnY29udGV4dC1tZW51LWNsaWNrJzogdGhpcy5jb250ZXh0TWVudUNsaWNrRXZlbnRcclxuICAgICAgfSksXHJcbiAgICAgIHJlZjogJ3hUYWJsZSdcclxuICAgIH0sICRzbG90cy5kZWZhdWx0KVxyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DT05URVhUX01FTlVfQ0xJQ0tfRVZFTlRdICh7IG1lbnUsIHJvdywgY29sdW1uIH06IGFueSwgZXZudDogYW55KSB7XHJcbiAgICAgIGxldCAkdGFibGUgPSB0aGlzLiRyZWZzLnhUYWJsZVxyXG4gICAgICBsZXQgeyBwcm9wZXJ0eSB9ID0gY29sdW1uXHJcbiAgICAgIHN3aXRjaCAobWVudS5jb2RlKSB7XHJcbiAgICAgICAgY2FzZSAnY2xpcCc6XHJcbiAgICAgICAgICAkdGFibGUuaGFuZGxlQ29weWVkKHRydWUsIGV2bnQpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ2NvcHknOlxyXG4gICAgICAgICAgJHRhYmxlLmhhbmRsZUNvcHllZChmYWxzZSwgZXZudClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAncGFzdGUnOlxyXG4gICAgICAgICAgJHRhYmxlLmhhbmRsZVBhc3RlKGV2bnQpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ2luc2VydCc6XHJcbiAgICAgICAgICAkdGFibGUuaW5zZXJ0QXQoe30sIHJvdylcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAncmVtb3ZlJzpcclxuICAgICAgICAgICR0YWJsZS5yZW1vdmUocm93KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdjbGVhckRhdGEnOlxyXG4gICAgICAgICAgJHRhYmxlLmNsZWFyRGF0YShyb3csIHByb3BlcnR5KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdjbGVhckZpbHRlcic6XHJcbiAgICAgICAgICAkdGFibGUuY2xlYXJGaWx0ZXIoY29sdW1uKVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdmaWx0ZXJTZWxlY3QnOlxyXG4gICAgICAgICAgJHRhYmxlLmZpbHRlcihwcm9wZXJ0eSlcclxuICAgICAgICAgICAgLnRoZW4oKG9wdGlvbnM6IEFycmF5PGFueT4pID0+IHtcclxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBvcHRpb25zWzBdXHJcbiAgICAgICAgICAgICAgICBvcHRpb24uZGF0YSA9IFhFVXRpbHMuZ2V0KHJvdywgcHJvcGVydHkpXHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY2hlY2tlZCA9IHRydWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gJHRhYmxlLnVwZGF0ZURhdGEoKSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnY2xlYXJTb3J0JzpcclxuICAgICAgICAgICR0YWJsZS5jbGVhclNvcnQoKVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdzb3J0QXNjJzpcclxuICAgICAgICAgICR0YWJsZS5zb3J0KHByb3BlcnR5LCAnYXNjJylcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnc29ydERlc2MnOlxyXG4gICAgICAgICAgJHRhYmxlLnNvcnQocHJvcGVydHksICdkZXNjJylcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnZXhwb3J0QWxsJzpcclxuICAgICAgICAgICR0YWJsZS5leHBvcnRDc3YoeyBpc0hlYWRlcjogZmFsc2UgfSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW5zLCByb3dzIH0gPSAkdGFibGUuZ2V0TW91c2VDaGVja2VkcygpXHJcbiAgICAgICAgICBjb25zdCB7IGNvbExpc3QsIHJvd0xpc3QgfSA9IHRoaXMubWVyZ2VTdG9yZVxyXG4gICAgICAgICAgaWYgKHJvd3MubGVuZ3RoICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJvd3MuZm9yRWFjaCgocm93OiBhbnkpID0+IHJvd0xpc3QuaW5kZXhPZihyb3cpID09PSAtMSA/IHJvd0xpc3QucHVzaChyb3cpIDogMClcclxuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKChjb2x1bW46IGFueSkgPT4gY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPT09IC0xID8gY29sTGlzdC5wdXNoKGNvbHVtbikgOiAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtFWENFTF9NRVRIT0RTX05BTUUuQ0VMTF9TUEFOX01FVEhPRF0gKHBhcmFtczogYW55KSB7XHJcbiAgICAgIGxldCB7IHJvdywgJHJvd0luZGV4LCBjb2x1bW4sIGRhdGEgfSA9IHBhcmFtc1xyXG4gICAgICBjb25zdCB7IGNvbExpc3QsIHJvd0xpc3QgfSA9IHRoaXMubWVyZ2VTdG9yZVxyXG4gICAgICBpZiAoY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPiAtMSkge1xyXG4gICAgICAgIGxldCBwcmV2Um93ID0gZGF0YVskcm93SW5kZXggLSAxXVxyXG4gICAgICAgIGxldCBuZXh0Um93ID0gZGF0YVskcm93SW5kZXggKyAxXVxyXG4gICAgICAgIGxldCBpc01lcmdlZCA9IHJvd0xpc3QuaW5kZXhPZihyb3cpID4gLTFcclxuICAgICAgICBpZiAocHJldlJvdyAmJiBpc01lcmdlZCAmJiByb3dMaXN0LmluZGV4T2YocHJldlJvdykgPiAtMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgcm93c3BhbjogMCwgY29sc3BhbjogMCB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBjb3VudFJvd3NwYW4gPSAxXHJcbiAgICAgICAgICBpZiAoaXNNZXJnZWQpIHtcclxuICAgICAgICAgICAgd2hpbGUgKG5leHRSb3cgJiYgcm93TGlzdC5pbmRleE9mKG5leHRSb3cpID4gLTEpIHtcclxuICAgICAgICAgICAgICBuZXh0Um93ID0gZGF0YVsrK2NvdW50Um93c3BhbiArICRyb3dJbmRleF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNvdW50Um93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgcm93c3BhbjogY291bnRSb3dzcGFuLCBjb2xzcGFuOiAxIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHJvd0hlaWdodCA9IDI0XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcclxuICBsZXQgcmFuZ2VEYXRhID0geyB0ZXh0OiAnJywgc3RhcnQ6IDAsIGVuZDogMCB9XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICByYW5nZURhdGEuc3RhcnQgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydFxyXG4gICAgcmFuZ2VEYXRhLmVuZCA9IHRleHRhcmVhLnNlbGVjdGlvbkVuZFxyXG4gIH1cclxuICByZXR1cm4gcmFuZ2VEYXRhXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEN1cnNvclBvc2l0aW9uICh0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgcmFuZ2VEYXRhOiBhbnkpIHtcclxuICBpZiAodGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIHRleHRhcmVhLmZvY3VzKClcclxuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlRGF0YS5zdGFydCwgcmFuZ2VEYXRhLmVuZClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Plh73mlbBcclxuICovXHJcbmNvbnN0IHJlbmRlck1hcCA9IHtcclxuICBjZWxsOiB7XHJcbiAgICBhdXRvZm9jdXM6ICcudnhlLXRleHRhcmVhJyxcclxuICAgIHJlbmRlckVkaXQgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55LCB7ICRleGNlbCB9OiBhbnkpIHtcclxuICAgICAgbGV0IHsgZXhjZWxTdG9yZSB9ID0gJGV4Y2VsXHJcbiAgICAgIGxldCB7IHVwbG9hZFJvd3MgfSA9IGV4Y2VsU3RvcmVcclxuICAgICAgbGV0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICBsZXQgeyBtb2RlbCB9ID0gY29sdW1uXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgY2xhc3M6ICd2eGUtaW5wdXQtLXdyYXBwZXIgdnhlLWV4Y2VsLWNlbGwnLFxyXG4gICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtjb2x1bW4ucmVuZGVySGVpZ2h0IC0gMX1weGBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBbXHJcbiAgICAgICAgICBoKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGV4dGFyZWEnLFxyXG4gICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiBgJHtjb2x1bW4ucmVuZGVyV2lkdGh9cHhgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgaW5wdXQgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucEVsZW0gPSBldm50LnRhcmdldFxyXG4gICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wRWxlbS5zY3JvbGxIZWlnaHQgPiBpbnBFbGVtLm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS53aWR0aCA9IGAke2lucEVsZW0ub2Zmc2V0V2lkdGggKyAyMH1weGBcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAke2lucEVsZW0uc2Nyb2xsSGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaGFuZ2UgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJvd3MuaW5kZXhPZihyb3cpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGxvYWRSb3dzLnB1c2gocm93KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAga2V5ZG93biAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wRWxlbSA9IGV2bnQudGFyZ2V0XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZudC5hbHRLZXkgJiYgZXZudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICBldm50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgZXZudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VEYXRhID0gZ2V0Q3Vyc29yUG9zaXRpb24oaW5wRWxlbSlcclxuICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IHJhbmdlRGF0YS5lbmRcclxuICAgICAgICAgICAgICAgICAgbGV0IGNlbGxWYWx1ZSA9IGlucEVsZW0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgY2VsbFZhbHVlID0gYCR7Y2VsbFZhbHVlLnNsaWNlKDAsIHBvcyl9XFxuJHtjZWxsVmFsdWUuc2xpY2UocG9zLCBjZWxsVmFsdWUubGVuZ3RoKX1gXHJcbiAgICAgICAgICAgICAgICAgIGlucEVsZW0udmFsdWUgPSBjZWxsVmFsdWVcclxuICAgICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGNlbGxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAkeyhNYXRoLmZsb29yKGlucEVsZW0ub2Zmc2V0SGVpZ2h0IC8gcm93SGVpZ2h0KSArIDEpICogcm93SGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZURhdGEuc3RhcnQgPSByYW5nZURhdGEuZW5kID0gKytwb3NcclxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJzb3JQb3NpdGlvbihpbnBFbGVtLCByYW5nZURhdGEpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIF0pXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICByZW5kZXJDZWxsIChoOiBGdW5jdGlvbiwgZWRpdFJlbmRlcjogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICBsZXQgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlubmVySFRNTDogWEVVdGlscy5lc2NhcGUoWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOWunueOsOeugOWNleeahCBFeGNlbCDooajmoLxcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbkV4Y2VsID0ge1xyXG4gIGluc3RhbGwgKHh0YWJsZTogYW55KSB7XHJcbiAgICBsZXQgeyBWdWUsIFRhYmxlLCByZW5kZXJlciwgdiB9ID0geHRhYmxlXHJcbiAgICBpZiAodiA9PT0gJ3YxJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1t2eGUtdGFibGUtcGx1Z2luLWV4Y2VsXSA+PSBWMiB2ZXJzaW9uIGlzIHJlcXVpcmVkLicpXHJcbiAgICB9XHJcbiAgICAvLyDnu6fmib8gVGFibGVcclxuICAgIFhFVXRpbHMuYXNzaWduKEV4Y2VsLnByb3BzLCBUYWJsZS5wcm9wcylcclxuICAgIFhFVXRpbHMuZWFjaChUYWJsZS5tZXRob2RzLCAoY2I6IEZ1bmN0aW9uLCBuYW1lOiBFWENFTF9NRVRIT0RTX05BTUUpID0+IHtcclxuICAgICAgRXhjZWwubWV0aG9kc1tuYW1lXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4kcmVmcy54VGFibGVbbmFtZV0uYXBwbHkodGhpcy4kcmVmcy54VGFibGUsIGFyZ3VtZW50cylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC8vIOa3u+WKoOWIsOa4suafk+WZqFxyXG4gICAgcmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKVxyXG4gICAgLy8g5rOo5YaM57uE5Lu2XHJcbiAgICBWdWUuY29tcG9uZW50KEV4Y2VsLm5hbWUsIEV4Y2VsKVxyXG4gIH1cclxufVxyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgVlhFVGFibGU6IGFueVxyXG4gIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WWEVUYWJsZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5FeGNlbClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5FeGNlbFxyXG4iXX0=
