"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginExcel = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  /* eslint-disable no-unused-vars */
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig,
            sortConfig = this.sortConfig,
            filterConfig = this.filterConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            range: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          sortConfig: Object.assign({
            showIcon: false
          }, sortConfig),
          filterConfig: Object.assign({
            showIcon: false
          }, filterConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.setFilter(column, [{
            data: _xeUtils["default"].get(row, property),
            checked: true
          }]);
          $table.updateData();
          $table.clearIndexChecked();
          $table.clearHeaderChecked();
          $table.clearChecked();
          $table.clearSelected();
          $table.clearCopyed();
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _ref3 = $table.getSelectedRanges ? $table.getSelectedRanges() : $table.getMouseCheckeds(),
              columns = _ref3.columns,
              rows = _ref3.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: 'textarea',
    renderEdit: function renderEdit(h, editRender, params) {
      var $table = params.$table,
          row = params.row,
          column = params.column;
      var $excel = $table.$parent;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-textarea vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea--inner',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的 EXCEL 表格
 */

var VXETablePluginExcel = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v !== 'v2') {
      throw new Error('[vxe-table-plugin-excel] V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginExcel = VXETablePluginExcel;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginExcel);
}

var _default = VXETablePluginExcel;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsInNvcnRDb25maWciLCJmaWx0ZXJDb25maWciLCJYRVV0aWxzIiwiYXNzaWduIiwiYm9yZGVyIiwicmVzaXphYmxlIiwic2hvd092ZXJmbG93IiwiY29udGV4dE1lbnUiLCJtb3VzZUNvbmZpZyIsInNlbGVjdGVkIiwicmFuZ2UiLCJrZXlib2FyZENvbmZpZyIsImlzQXJyb3ciLCJpc0RlbCIsImlzRW50ZXIiLCJpc1RhYiIsImlzQ3V0IiwiaXNFZGl0IiwiT2JqZWN0Iiwib3B0aW1pemF0aW9uIiwic2Nyb2xsWCIsImd0Iiwic2Nyb2xsWSIsIndhdGNoIiwidmFsdWUiLCJsb2FkQ29sdW1uIiwibW91bnRlZCIsImxlbmd0aCIsInJlbmRlciIsImgiLCIkc2xvdHMiLCIkbGlzdGVuZXJzIiwib24iLCJjb250ZXh0TWVudUNsaWNrRXZlbnQiLCJyZWYiLCJtZXRob2RzIiwiQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UIiwiZXZudCIsIm1lbnUiLCJyb3ciLCJjb2x1bW4iLCIkdGFibGUiLCIkcmVmcyIsInhUYWJsZSIsInByb3BlcnR5IiwiaGFuZGxlQ29weWVkIiwiaGFuZGxlUGFzdGUiLCJpbnNlcnRBdCIsInJlbW92ZSIsImNsZWFyRGF0YSIsImNsZWFyRmlsdGVyIiwic2V0RmlsdGVyIiwiZ2V0IiwiY2hlY2tlZCIsInVwZGF0ZURhdGEiLCJjbGVhckluZGV4Q2hlY2tlZCIsImNsZWFySGVhZGVyQ2hlY2tlZCIsImNsZWFyQ2hlY2tlZCIsImNsZWFyU2VsZWN0ZWQiLCJjbGVhckNvcHllZCIsImNsZWFyU29ydCIsInNvcnQiLCJleHBvcnREYXRhIiwiaXNIZWFkZXIiLCJnZXRTZWxlY3RlZFJhbmdlcyIsImdldE1vdXNlQ2hlY2tlZHMiLCJyb3dzIiwiZm9yRWFjaCIsImluZGV4T2YiLCJwdXNoIiwiQ0VMTF9TUEFOX01FVEhPRCIsInBhcmFtcyIsIiRyb3dJbmRleCIsInByZXZSb3ciLCJuZXh0Um93IiwiaXNNZXJnZWQiLCJyb3dzcGFuIiwiY29sc3BhbiIsImNvdW50Um93c3BhbiIsImVhY2giLCJjYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29tcG9uZW50Iiwicm93SGVpZ2h0IiwiZ2V0Q3Vyc29yUG9zaXRpb24iLCJ0ZXh0YXJlYSIsInJhbmdlRGF0YSIsInRleHQiLCJzdGFydCIsImVuZCIsInNldFNlbGVjdGlvblJhbmdlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRDdXJzb3JQb3NpdGlvbiIsImZvY3VzIiwicmVuZGVyTWFwIiwiY2VsbCIsImF1dG9mb2N1cyIsInJlbmRlckVkaXQiLCJlZGl0UmVuZGVyIiwiJGV4Y2VsIiwiJHBhcmVudCIsIm1vZGVsIiwic3R5bGUiLCJoZWlnaHQiLCJyZW5kZXJIZWlnaHQiLCJ3aWR0aCIsInJlbmRlcldpZHRoIiwiZG9tUHJvcHMiLCJpbnB1dCIsImlucEVsZW0iLCJ0YXJnZXQiLCJ1cGRhdGUiLCJzY3JvbGxIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImNoYW5nZSIsImtleWRvd24iLCJhbHRLZXkiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJwb3MiLCJjZWxsVmFsdWUiLCJzbGljZSIsIk1hdGgiLCJmbG9vciIsInNldFRpbWVvdXQiLCJyZW5kZXJDZWxsIiwiaW5uZXJIVE1MIiwiZXNjYXBlIiwicmVwbGFjZSIsIlZYRVRhYmxlUGx1Z2luRXhjZWwiLCJpbnN0YWxsIiwieHRhYmxlIiwicmVuZGVyZXIiLCJ2IiwiRXJyb3IiLCJtaXhpbiIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztBQUdBLElBQU1BLGVBQWUsR0FBRztBQUN0QkMsRUFBQUEsT0FBTyxFQUFFLFVBRGE7QUFFdEJDLEVBQUFBLElBQUksRUFBRSxNQUZnQjtBQUd0QkMsRUFBQUEsUUFBUSxFQUFFLEtBSFk7QUFJdEJDLEVBQUFBLFVBQVUsRUFBRTtBQUpVLENBQXhCO0FBT0EsSUFBTUMsZ0JBQWdCLEdBQUc7QUFDdkJDLEVBQUFBLE1BQU0sRUFBRTtBQUNOQyxJQUFBQSxPQUFPLEVBQUUsQ0FDUCxDQUNFO0FBQ0VDLE1BQUFBLElBQUksRUFBRSxXQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBREYsRUFLRTtBQUNFRCxNQUFBQSxJQUFJLEVBQUUsV0FEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQUxGLENBRE87QUFESCxHQURlO0FBZXZCQyxFQUFBQSxJQUFJLEVBQUU7QUFDSkgsSUFBQUEsT0FBTyxFQUFFLENBQ1AsQ0FDRTtBQUNFQyxNQUFBQSxJQUFJLEVBQUUsTUFEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQURGLEVBS0U7QUFDRUQsTUFBQUEsSUFBSSxFQUFFLE1BRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FMRixFQVNFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxPQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBVEYsQ0FETyxFQWVQLENBQ0U7QUFDRUQsTUFBQUEsSUFBSSxFQUFFLFFBRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FERixFQUtFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxRQURS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QixDQUN0Qy9CLE1BRHNDO0FBRW5ELGFBQU8sQ0FDTFgsQ0FBQyxDQUFDLE1BQUQsRUFBUztBQUNSZ0YsUUFBQUEsUUFBUSxFQUFFO0FBQ1JxQixVQUFBQSxTQUFTLEVBQUVoSSxvQkFBUWlJLE1BQVIsQ0FBZWpJLG9CQUFRa0QsR0FBUixDQUFZYixHQUFaLEVBQWlCQyxNQUFNLENBQUNJLFFBQXhCLENBQWYsRUFBa0R3RixPQUFsRCxDQUEwRCxLQUExRCxFQUFpRSxNQUFqRTtBQURIO0FBREYsT0FBVCxDQURJLENBQVA7QUFPRDtBQTFFRztBQURVLENBQWxCO0FBK0VBOzs7O0FBR08sSUFBTUMsbUJBQW1CLEdBQUc7QUFDakNDLEVBQUFBLE9BRGlDLG1CQUN4QkMsTUFEd0IsRUFDRDtBQUFBLFFBQ3RCQyxRQURzQixHQUNORCxNQURNLENBQ3RCQyxRQURzQjtBQUFBLFFBQ1pDLENBRFksR0FDTkYsTUFETSxDQUNaRSxDQURZOztBQUU5QixRQUFJQSxDQUFDLEtBQUssSUFBVixFQUFnQjtBQUNkLFlBQU0sSUFBSUMsS0FBSixDQUFVLGtEQUFWLENBQU47QUFDRCxLQUo2QixDQUs5Qjs7O0FBQ0FGLElBQUFBLFFBQVEsQ0FBQ0csS0FBVCxDQUFlM0MsU0FBZixFQU44QixDQU85Qjs7QUFDQWpILElBQUFBLGlCQUFpQixDQUFDd0osTUFBRCxDQUFqQjtBQUNEO0FBVmdDLENBQTVCOzs7QUFhUCxJQUFJLE9BQU9LLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUNBLE1BQU0sQ0FBQ0MsUUFBNUMsRUFBc0Q7QUFDcERELEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0JULG1CQUFwQjtBQUNEOztlQUVjQSxtQiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG5pbXBvcnQgVlhFVGFibGUgZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcblxyXG5jb25zdCBleGNlbEVkaXRDb25maWcgPSB7XHJcbiAgdHJpZ2dlcjogJ2RibGNsaWNrJyxcclxuICBtb2RlOiAnY2VsbCcsXHJcbiAgc2hvd0ljb246IGZhbHNlLFxyXG4gIHNob3dTdGF0dXM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGV4Y2VsQ29udGV4dE1lbnUgPSB7XHJcbiAgaGVhZGVyOiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICfpmpDol4/liJcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflj5bmtojmiYDmnInpmpDol48nXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICBdXHJcbiAgfSxcclxuICBib2R5OiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY2xpcCcsXHJcbiAgICAgICAgICBuYW1lOiAn5Ymq6LS0KEN0cmwrWCknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY29weScsXHJcbiAgICAgICAgICBuYW1lOiAn5aSN5Yi2KEN0cmwrQyknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAncGFzdGUnLFxyXG4gICAgICAgICAgbmFtZTogJ+eymOi0tChDdHJsK1YpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdpbnNlcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aPkuWFpSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdyZW1vdmUnLFxyXG4gICAgICAgICAgbmFtZTogJ+WIoOmZpCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGVhckRhdGEnLFxyXG4gICAgICAgICAgbmFtZTogJ+a4hemZpOWGheWuuShEZWwpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgLy8gW1xyXG4gICAgICAvLyAgIHtcclxuICAgICAgLy8gICAgIGNvZGU6ICdtZXJnZScsXHJcbiAgICAgIC8vICAgICBuYW1lOiAn5ZCI5bm25Y2V5YWD5qC8J1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdmaWx0ZXInLFxyXG4gICAgICAgICAgbmFtZTogJ+etm+mAiScsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyRmlsdGVyJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk562b6YCJJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2ZpbHRlclNlbGVjdCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+aMieaJgOmAieWNleWFg+agvOeahOWAvOetm+mAiSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3NvcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aOkuW6jycsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyU29ydCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+a4hemZpOaOkuW6jydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdzb3J0QXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5Y2H5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnREZXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5YCS5bqPJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2V4cG9ydEFsbCcsXHJcbiAgICAgICAgICBuYW1lOiAn5a+85Ye65pWw5o2uLmNzdidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVYQ0VMX01FVEhPRFNfTkFNRSB7XHJcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuICBDT05URVhUX01FTlVfQ0xJQ0tfRVZFTlQgPSAnY29udGV4dE1lbnVDbGlja0V2ZW50JyxcclxuICBDRUxMX1NQQU5fTUVUSE9EID0gJ2NlbGxTcGFuTWV0aG9kJ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIHZFeGNlbERhdGEge1xyXG4gIGV4Y2VsU3RvcmU6IHtcclxuICAgIHVwbG9hZFJvd3M6IGFueVtdO1xyXG4gIH1cclxuICBtZXJnZVN0b3JlOiB7XHJcbiAgICBjb2xMaXN0OiBhbnlbXTtcclxuICAgIHJvd0xpc3Q6IGFueVtdO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQgKHsgVnVlLCBUYWJsZSB9OiBhbnkpIHtcclxuICBjb25zdCBFeGNlbDogYW55ID0ge1xyXG4gICAgbmFtZTogJ1Z4ZUV4Y2VsJyxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgIGNvbHVtbnM6IEFycmF5XHJcbiAgICB9LFxyXG4gICAgZGF0YSAoKSB7XHJcbiAgICAgIGNvbnN0IGRhdGE6IHZFeGNlbERhdGEgPSB7XHJcbiAgICAgICAgZXhjZWxTdG9yZToge1xyXG4gICAgICAgICAgdXBsb2FkUm93czogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lcmdlU3RvcmU6IHtcclxuICAgICAgICAgIGNvbExpc3Q6IFtdLFxyXG4gICAgICAgICAgcm93TGlzdDogW11cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGFcclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICB0YWJsZVByb3BzICh0aGlzOiBhbnkpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHsgJHByb3BzLCBlZGl0Q29uZmlnLCBzb3J0Q29uZmlnLCBmaWx0ZXJDb25maWcgfSA9IHRoaXNcclxuICAgICAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sICRwcm9wcywge1xyXG4gICAgICAgICAgYm9yZGVyOiB0cnVlLFxyXG4gICAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd092ZXJmbG93OiBudWxsLFxyXG4gICAgICAgICAgLy8gc3Bhbk1ldGhvZDogdGhpcy5jZWxsU3Bhbk1ldGhvZCxcclxuICAgICAgICAgIGNvbnRleHRNZW51OiBleGNlbENvbnRleHRNZW51LFxyXG4gICAgICAgICAgbW91c2VDb25maWc6IHsgc2VsZWN0ZWQ6IHRydWUsIHJhbmdlOiB0cnVlIH0sXHJcbiAgICAgICAgICBrZXlib2FyZENvbmZpZzogeyBpc0Fycm93OiB0cnVlLCBpc0RlbDogdHJ1ZSwgaXNFbnRlcjogdHJ1ZSwgaXNUYWI6IHRydWUsIGlzQ3V0OiB0cnVlLCBpc0VkaXQ6IHRydWUgfSxcclxuICAgICAgICAgIGVkaXRDb25maWc6IE9iamVjdC5hc3NpZ24oe30sIGV4Y2VsRWRpdENvbmZpZywgZWRpdENvbmZpZyksXHJcbiAgICAgICAgICBzb3J0Q29uZmlnOiBPYmplY3QuYXNzaWduKHsgc2hvd0ljb246IGZhbHNlIH0sIHNvcnRDb25maWcpLFxyXG4gICAgICAgICAgZmlsdGVyQ29uZmlnOiBPYmplY3QuYXNzaWduKHsgc2hvd0ljb246IGZhbHNlIH0sIGZpbHRlckNvbmZpZyksXHJcbiAgICAgICAgICBvcHRpbWl6YXRpb246IHtcclxuICAgICAgICAgICAgc2Nyb2xsWDoge1xyXG4gICAgICAgICAgICAgIGd0OiAxMDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2Nyb2xsWToge1xyXG4gICAgICAgICAgICAgIGd0OiAxMDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICBjb2x1bW5zICh0aGlzOiBhbnksIHZhbHVlOiBhbnlbXSkge1xyXG4gICAgICAgIHRoaXMubG9hZENvbHVtbih2YWx1ZSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQgKHRoaXM6IGFueSkge1xyXG4gICAgICBjb25zdCB7IGNvbHVtbnMgfSA9IHRoaXNcclxuICAgICAgaWYgKGNvbHVtbnMgJiYgY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmxvYWRDb2x1bW4odGhpcy5jb2x1bW5zKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVuZGVyICh0aGlzOiBhbnksIGg6IEZ1bmN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHsgJHNsb3RzLCAkbGlzdGVuZXJzLCB0YWJsZVByb3BzIH0gPSB0aGlzXHJcbiAgICAgIHJldHVybiBoKCd2eGUtdGFibGUnLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtZXhjZWwnLFxyXG4gICAgICAgIHByb3BzOiB0YWJsZVByb3BzLFxyXG4gICAgICAgIG9uOiBYRVV0aWxzLmFzc2lnbih7fSwgJGxpc3RlbmVycywge1xyXG4gICAgICAgICAgJ2NvbnRleHQtbWVudS1jbGljayc6IHRoaXMuY29udGV4dE1lbnVDbGlja0V2ZW50XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgcmVmOiAneFRhYmxlJ1xyXG4gICAgICB9LCAkc2xvdHMuZGVmYXVsdClcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgIFtFWENFTF9NRVRIT0RTX05BTUUuQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UXSAodGhpczogYW55LCB7IG1lbnUsIHJvdywgY29sdW1uIH06IGFueSwgZXZudDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgJHRhYmxlID0gdGhpcy4kcmVmcy54VGFibGVcclxuICAgICAgICBjb25zdCB7IHByb3BlcnR5IH0gPSBjb2x1bW5cclxuICAgICAgICBzd2l0Y2ggKG1lbnUuY29kZSkge1xyXG4gICAgICAgICAgY2FzZSAnY2xpcCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVDb3B5ZWQodHJ1ZSwgZXZudClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NvcHknOlxyXG4gICAgICAgICAgICAkdGFibGUuaGFuZGxlQ29weWVkKGZhbHNlLCBldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAncGFzdGUnOlxyXG4gICAgICAgICAgICAkdGFibGUuaGFuZGxlUGFzdGUoZXZudClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2luc2VydCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5pbnNlcnRBdCh7fSwgcm93KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAncmVtb3ZlJzpcclxuICAgICAgICAgICAgJHRhYmxlLnJlbW92ZShyb3cpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhckRhdGEnOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJEYXRhKHJvdywgcHJvcGVydHkpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhckZpbHRlcic6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckZpbHRlcihjb2x1bW4pXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdmaWx0ZXJTZWxlY3QnOlxyXG4gICAgICAgICAgICAkdGFibGUuc2V0RmlsdGVyKGNvbHVtbiwgW1xyXG4gICAgICAgICAgICAgIHsgZGF0YTogWEVVdGlscy5nZXQocm93LCBwcm9wZXJ0eSksIGNoZWNrZWQ6IHRydWUgfVxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAkdGFibGUudXBkYXRlRGF0YSgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckluZGV4Q2hlY2tlZCgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckhlYWRlckNoZWNrZWQoKVxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJDaGVja2VkKClcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyU2VsZWN0ZWQoKVxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJDb3B5ZWQoKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY2xlYXJTb3J0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyU29ydCgpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdzb3J0QXNjJzpcclxuICAgICAgICAgICAgJHRhYmxlLnNvcnQocHJvcGVydHksICdhc2MnKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnc29ydERlc2MnOlxyXG4gICAgICAgICAgICAkdGFibGUuc29ydChwcm9wZXJ0eSwgJ2Rlc2MnKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnZXhwb3J0QWxsJzpcclxuICAgICAgICAgICAgJHRhYmxlLmV4cG9ydERhdGEoeyBpc0hlYWRlcjogZmFsc2UgfSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgY29uc3QgeyBjb2x1bW5zLCByb3dzIH0gPSAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMgPyAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMoKSA6ICR0YWJsZS5nZXRNb3VzZUNoZWNrZWRzKClcclxuICAgICAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4gcm93TGlzdC5pbmRleE9mKHJvdykgPT09IC0xID8gcm93TGlzdC5wdXNoKHJvdykgOiAwKVxyXG4gICAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBhbnkpID0+IGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID09PSAtMSA/IGNvbExpc3QucHVzaChjb2x1bW4pIDogMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DRUxMX1NQQU5fTUVUSE9EXSAodGhpczogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHsgcm93LCAkcm93SW5kZXgsIGNvbHVtbiwgZGF0YSB9ID0gcGFyYW1zXHJcbiAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICBpZiAoY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPiAtMSkge1xyXG4gICAgICAgICAgY29uc3QgcHJldlJvdyA9IGRhdGFbJHJvd0luZGV4IC0gMV1cclxuICAgICAgICAgIGxldCBuZXh0Um93ID0gZGF0YVskcm93SW5kZXggKyAxXVxyXG4gICAgICAgICAgY29uc3QgaXNNZXJnZWQgPSByb3dMaXN0LmluZGV4T2Yocm93KSA+IC0xXHJcbiAgICAgICAgICBpZiAocHJldlJvdyAmJiBpc01lcmdlZCAmJiByb3dMaXN0LmluZGV4T2YocHJldlJvdykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiAwLCBjb2xzcGFuOiAwIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudFJvd3NwYW4gPSAxXHJcbiAgICAgICAgICAgIGlmIChpc01lcmdlZCkge1xyXG4gICAgICAgICAgICAgIHdoaWxlIChuZXh0Um93ICYmIHJvd0xpc3QuaW5kZXhPZihuZXh0Um93KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0Um93ID0gZGF0YVsrK2NvdW50Um93c3BhbiArICRyb3dJbmRleF1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvdW50Um93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiBjb3VudFJvd3NwYW4sIGNvbHNwYW46IDEgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOe7p+aJvyBUYWJsZVxyXG4gIFhFVXRpbHMuYXNzaWduKEV4Y2VsLnByb3BzLCBUYWJsZS5wcm9wcylcclxuICBYRVV0aWxzLmVhY2goVGFibGUubWV0aG9kcywgKGNiOiBGdW5jdGlvbiwgbmFtZTogRVhDRUxfTUVUSE9EU19OQU1FKSA9PiB7XHJcbiAgICBFeGNlbC5tZXRob2RzW25hbWVdID0gZnVuY3Rpb24gKHRoaXM6IGFueSkge1xyXG4gICAgICByZXR1cm4gdGhpcy4kcmVmcy54VGFibGVbbmFtZV0uYXBwbHkodGhpcy4kcmVmcy54VGFibGUsIGFyZ3VtZW50cylcclxuICAgIH1cclxuICB9KVxyXG4gIFZ1ZS5jb21wb25lbnQoRXhjZWwubmFtZSwgRXhjZWwpXHJcbn1cclxuXHJcbmNvbnN0IHJvd0hlaWdodDogbnVtYmVyID0gMjRcclxuXHJcbmludGVyZmFjZSBwb3NSYW5nZURhdGEge1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBzdGFydDogbnVtYmVyO1xyXG4gIGVuZDogbnVtYmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IGFueSk6IHBvc1JhbmdlRGF0YSB7XHJcbiAgY29uc3QgcmFuZ2VEYXRhOiBwb3NSYW5nZURhdGEgPSB7IHRleHQ6ICcnLCBzdGFydDogMCwgZW5kOiAwIH1cclxuICBpZiAodGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIHJhbmdlRGF0YS5zdGFydCA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0XHJcbiAgICByYW5nZURhdGEuZW5kID0gdGV4dGFyZWEuc2VsZWN0aW9uRW5kXHJcbiAgfVxyXG4gIHJldHVybiByYW5nZURhdGFcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q3Vyc29yUG9zaXRpb24gKHRleHRhcmVhOiBhbnksIHJhbmdlRGF0YTogcG9zUmFuZ2VEYXRhKSB7XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICB0ZXh0YXJlYS5mb2N1cygpXHJcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShyYW5nZURhdGEuc3RhcnQsIHJhbmdlRGF0YS5lbmQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5riy5p+T5Ye95pWwXHJcbiAqL1xyXG5jb25zdCByZW5kZXJNYXAgPSB7XHJcbiAgY2VsbDoge1xyXG4gICAgYXV0b2ZvY3VzOiAndGV4dGFyZWEnLFxyXG4gICAgcmVuZGVyRWRpdCAoaDogRnVuY3Rpb24sIGVkaXRSZW5kZXI6IGFueSwgcGFyYW1zOiBhbnkpIHtcclxuICAgICAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgY29uc3QgJGV4Y2VsID0gJHRhYmxlLiRwYXJlbnRcclxuICAgICAgY29uc3QgeyBleGNlbFN0b3JlIH0gPSAkZXhjZWxcclxuICAgICAgY29uc3QgeyB1cGxvYWRSb3dzIH0gPSBleGNlbFN0b3JlXHJcbiAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IGNvbHVtblxyXG4gICAgICByZXR1cm4gW1xyXG4gICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgIGNsYXNzOiAndnhlLXRleHRhcmVhIHZ4ZS1leGNlbC1jZWxsJyxcclxuICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgIGhlaWdodDogYCR7Y29sdW1uLnJlbmRlckhlaWdodH1weGBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBbXHJcbiAgICAgICAgICBoKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGV4dGFyZWEtLWlubmVyJyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICB3aWR0aDogYCR7Y29sdW1uLnJlbmRlcldpZHRofXB4YFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkb21Qcm9wczoge1xyXG4gICAgICAgICAgICAgIHZhbHVlOiBtb2RlbC52YWx1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgIGlucHV0IChldm50OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucEVsZW0gPSBldm50LnRhcmdldFxyXG4gICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wRWxlbS5zY3JvbGxIZWlnaHQgPiBpbnBFbGVtLm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS53aWR0aCA9IGAke2lucEVsZW0ub2Zmc2V0V2lkdGggKyAyMH1weGBcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAke2lucEVsZW0uc2Nyb2xsSGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaGFuZ2UgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJvd3MuaW5kZXhPZihyb3cpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGxvYWRSb3dzLnB1c2gocm93KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAga2V5ZG93biAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnBFbGVtID0gZXZudC50YXJnZXRcclxuICAgICAgICAgICAgICAgIGlmIChldm50LmFsdEtleSAmJiBldm50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGV2bnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICBldm50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlRGF0YSA9IGdldEN1cnNvclBvc2l0aW9uKGlucEVsZW0pXHJcbiAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSByYW5nZURhdGEuZW5kXHJcbiAgICAgICAgICAgICAgICAgIGxldCBjZWxsVmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGAke2NlbGxWYWx1ZS5zbGljZSgwLCBwb3MpfVxcbiR7Y2VsbFZhbHVlLnNsaWNlKHBvcywgY2VsbFZhbHVlLmxlbmd0aCl9YFxyXG4gICAgICAgICAgICAgICAgICBpbnBFbGVtLnZhbHVlID0gY2VsbFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIG1vZGVsLnVwZGF0ZSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBjZWxsVmFsdWVcclxuICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS5oZWlnaHQgPSBgJHsoTWF0aC5mbG9vcihpbnBFbGVtLm9mZnNldEhlaWdodCAvIHJvd0hlaWdodCkgKyAxKSAqIHJvd0hlaWdodH1weGBcclxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VEYXRhLnN0YXJ0ID0gcmFuZ2VEYXRhLmVuZCA9ICsrcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3Vyc29yUG9zaXRpb24oaW5wRWxlbSwgcmFuZ2VEYXRhKVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBdKVxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgcmVuZGVyQ2VsbCAoaDogRnVuY3Rpb24sIGVkaXRSZW5kZXI6IGFueSwgcGFyYW1zOiBhbnkpIHtcclxuICAgICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlubmVySFRNTDogWEVVdGlscy5lc2NhcGUoWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOWunueOsOeugOWNleeahCBFWENFTCDooajmoLxcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbkV4Y2VsID0ge1xyXG4gIGluc3RhbGwgKHh0YWJsZTogdHlwZW9mIFZYRVRhYmxlKSB7XHJcbiAgICBjb25zdCB7IHJlbmRlcmVyLCB2IH0gPSB4dGFibGVcclxuICAgIGlmICh2ICE9PSAndjInKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignW3Z4ZS10YWJsZS1wbHVnaW4tZXhjZWxdIFYyIHZlcnNpb24gaXMgcmVxdWlyZWQuJylcclxuICAgIH1cclxuICAgIC8vIOa3u+WKoOWIsOa4suafk+WZqFxyXG4gICAgcmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKVxyXG4gICAgLy8g5rOo5YaM57uE5Lu2XHJcbiAgICByZWdpc3RlckNvbXBvbmVudCh4dGFibGUpXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpbkV4Y2VsKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkV4Y2VsXHJcbiJdfQ==
