"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginVirtualTree = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            checked: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.filter(property).then(function (options) {
            if (options.length) {
              var option = options[0];
              option.data = _xeUtils["default"].get(row, property);
              option.checked = true;
            }
          }).then(function () {
            return $table.updateData();
          });
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _$table$getMouseCheck = $table.getMouseCheckeds(),
              columns = _$table$getMouseCheck.columns,
              rows = _$table$getMouseCheck.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: '.vxe-textarea--inner',
    renderEdit: function renderEdit(h, editRender, params, _ref3) {
      var $excel = _ref3.$excel;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var row = params.row,
          column = params.column;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-textarea vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea--inner',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的虚拟树表格
 */

var VXETablePluginVirtualTree = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-virtual-tree] >= V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginVirtualTree = VXETablePluginVirtualTree;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginVirtualTree);
}

var _default = VXETablePluginVirtualTree;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsIlhFVXRpbHMiLCJhc3NpZ24iLCJib3JkZXIiLCJyZXNpemFibGUiLCJzaG93T3ZlcmZsb3ciLCJjb250ZXh0TWVudSIsIm1vdXNlQ29uZmlnIiwic2VsZWN0ZWQiLCJjaGVja2VkIiwia2V5Ym9hcmRDb25maWciLCJpc0Fycm93IiwiaXNEZWwiLCJpc0VudGVyIiwiaXNUYWIiLCJpc0N1dCIsImlzRWRpdCIsIk9iamVjdCIsIm9wdGltaXphdGlvbiIsInNjcm9sbFgiLCJndCIsInNjcm9sbFkiLCJ3YXRjaCIsInZhbHVlIiwibG9hZENvbHVtbiIsIm1vdW50ZWQiLCJsZW5ndGgiLCJyZW5kZXIiLCJoIiwiJHNsb3RzIiwiJGxpc3RlbmVycyIsIm9uIiwiY29udGV4dE1lbnVDbGlja0V2ZW50IiwicmVmIiwibWV0aG9kcyIsIkNPTlRFWFRfTUVOVV9DTElDS19FVkVOVCIsImV2bnQiLCJtZW51Iiwicm93IiwiY29sdW1uIiwiJHRhYmxlIiwiJHJlZnMiLCJ4VGFibGUiLCJwcm9wZXJ0eSIsImhhbmRsZUNvcHllZCIsImhhbmRsZVBhc3RlIiwiaW5zZXJ0QXQiLCJyZW1vdmUiLCJjbGVhckRhdGEiLCJjbGVhckZpbHRlciIsImZpbHRlciIsInRoZW4iLCJvcHRpb24iLCJnZXQiLCJ1cGRhdGVEYXRhIiwiY2xlYXJTb3J0Iiwic29ydCIsImV4cG9ydERhdGEiLCJpc0hlYWRlciIsImdldE1vdXNlQ2hlY2tlZHMiLCJyb3dzIiwiZm9yRWFjaCIsImluZGV4T2YiLCJwdXNoIiwiQ0VMTF9TUEFOX01FVEhPRCIsInBhcmFtcyIsIiRyb3dJbmRleCIsInByZXZSb3ciLCJuZXh0Um93IiwiaXNNZXJnZWQiLCJyb3dzcGFuIiwiY29sc3BhbiIsImNvdW50Um93c3BhbiIsImVhY2giLCJjYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29tcG9uZW50Iiwicm93SGVpZ2h0IiwiZ2V0Q3Vyc29yUG9zaXRpb24iLCJ0ZXh0YXJlYSIsInJhbmdlRGF0YSIsInRleHQiLCJzdGFydCIsImVuZCIsInNldFNlbGVjdGlvblJhbmdlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRDdXJzb3JQb3NpdGlvbiIsImZvY3VzIiwicmVuZGVyTWFwIiwiY2VsbCIsImF1dG9mb2N1cyIsInJlbmRlckVkaXQiLCJlZGl0UmVuZGVyIiwiJGV4Y2VsIiwibW9kZWwiLCJzdHlsZSIsImhlaWdodCIsInJlbmRlckhlaWdodCIsIndpZHRoIiwicmVuZGVyV2lkdGgiLCJkb21Qcm9wcyIsImlucHV0IiwiaW5wRWxlbSIsInRhcmdldCIsInVwZGF0ZSIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiY2hhbmdlIiwia2V5ZG93biIsImFsdEtleSIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBvcyIsImNlbGxWYWx1ZSIsInNsaWNlIiwiTWF0aCIsImZsb29yIiwic2V0VGltZW91dCIsInJlbmRlckNlbGwiLCJpbm5lckhUTUwiLCJlc2NhcGUiLCJyZXBsYWNlIiwiVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSIsImluc3RhbGwiLCJ4dGFibGUiLCJyZW5kZXJlciIsInYiLCJFcnJvciIs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MUMsU0FBZixFQU44QixDQU85Qjs7QUFDQTFHLElBQUFBLGlCQUFpQixDQUFDZ0osTUFBRCxDQUFqQjtBQUNEO0FBVnNDLENBQWxDOzs7QUFhUCxJQUFJLE9BQU9LLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUNBLE1BQU0sQ0FBQ0MsUUFBNUMsRUFBc0Q7QUFDcERELEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0JULHlCQUFwQjtBQUNEOztlQUVjQSx5QiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG5pbXBvcnQgVlhFVGFibGUgZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcblxyXG5jb25zdCBleGNlbEVkaXRDb25maWcgPSB7XHJcbiAgdHJpZ2dlcjogJ2RibGNsaWNrJyxcclxuICBtb2RlOiAnY2VsbCcsXHJcbiAgc2hvd0ljb246IGZhbHNlLFxyXG4gIHNob3dTdGF0dXM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGV4Y2VsQ29udGV4dE1lbnUgPSB7XHJcbiAgaGVhZGVyOiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICfpmpDol4/liJcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflj5bmtojmiYDmnInpmpDol48nXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICBdXHJcbiAgfSxcclxuICBib2R5OiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY2xpcCcsXHJcbiAgICAgICAgICBuYW1lOiAn5Ymq6LS0KEN0cmwrWCknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY29weScsXHJcbiAgICAgICAgICBuYW1lOiAn5aSN5Yi2KEN0cmwrQyknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAncGFzdGUnLFxyXG4gICAgICAgICAgbmFtZTogJ+eymOi0tChDdHJsK1YpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdpbnNlcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aPkuWFpSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdyZW1vdmUnLFxyXG4gICAgICAgICAgbmFtZTogJ+WIoOmZpCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGVhckRhdGEnLFxyXG4gICAgICAgICAgbmFtZTogJ+a4hemZpOWGheWuuShEZWwpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgLy8gW1xyXG4gICAgICAvLyAgIHtcclxuICAgICAgLy8gICAgIGNvZGU6ICdtZXJnZScsXHJcbiAgICAgIC8vICAgICBuYW1lOiAn5ZCI5bm25Y2V5YWD5qC8J1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdmaWx0ZXInLFxyXG4gICAgICAgICAgbmFtZTogJ+etm+mAiScsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyRmlsdGVyJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk562b6YCJJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2ZpbHRlclNlbGVjdCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+aMieaJgOmAieWNleWFg+agvOeahOWAvOetm+mAiSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3NvcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aOkuW6jycsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyU29ydCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+a4hemZpOaOkuW6jydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdzb3J0QXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5Y2H5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnREZXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5YCS5bqPJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2V4cG9ydEFsbCcsXHJcbiAgICAgICAgICBuYW1lOiAn5a+85Ye65pWw5o2uLmNzdidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVYQ0VMX01FVEhPRFNfTkFNRSB7XHJcbiAgQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UID0gJ2NvbnRleHRNZW51Q2xpY2tFdmVudCcsXHJcbiAgQ0VMTF9TUEFOX01FVEhPRCA9ICdjZWxsU3Bhbk1ldGhvZCdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSB2RXhjZWxEYXRhIHtcclxuICBleGNlbFN0b3JlOiB7XHJcbiAgICB1cGxvYWRSb3dzOiBBcnJheTxhbnk+O1xyXG4gIH1cclxuICBtZXJnZVN0b3JlOiB7XHJcbiAgICBjb2xMaXN0OiBBcnJheTxhbnk+O1xyXG4gICAgcm93TGlzdDogQXJyYXk8YW55PjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50ICh7IFZ1ZSwgVGFibGUgfTogYW55KSB7XHJcbiAgY29uc3QgRXhjZWw6IGFueSA9IHtcclxuICAgIG5hbWU6ICdWeGVFeGNlbCcsXHJcbiAgICBwcm9wczoge1xyXG4gICAgICBjb2x1bW5zOiBBcnJheVxyXG4gICAgfSxcclxuICAgIGRhdGEgKCkge1xyXG4gICAgICBsZXQgZGF0YTogdkV4Y2VsRGF0YSA9IHtcclxuICAgICAgICBleGNlbFN0b3JlOiB7XHJcbiAgICAgICAgICB1cGxvYWRSb3dzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVyZ2VTdG9yZToge1xyXG4gICAgICAgICAgY29sTGlzdDogW10sXHJcbiAgICAgICAgICByb3dMaXN0OiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgIHRhYmxlUHJvcHMgKHRoaXM6IGFueSk6IGFueSB7XHJcbiAgICAgICAgbGV0IHsgJHByb3BzLCBlZGl0Q29uZmlnIH0gPSB0aGlzXHJcbiAgICAgICAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCAkcHJvcHMsIHtcclxuICAgICAgICAgIGJvcmRlcjogdHJ1ZSxcclxuICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgIHNob3dPdmVyZmxvdzogbnVsbCxcclxuICAgICAgICAgIC8vIHNwYW5NZXRob2Q6IHRoaXMuY2VsbFNwYW5NZXRob2QsXHJcbiAgICAgICAgICBjb250ZXh0TWVudTogZXhjZWxDb250ZXh0TWVudSxcclxuICAgICAgICAgIG1vdXNlQ29uZmlnOiB7IHNlbGVjdGVkOiB0cnVlLCBjaGVja2VkOiB0cnVlIH0sXHJcbiAgICAgICAgICBrZXlib2FyZENvbmZpZzogeyBpc0Fycm93OiB0cnVlLCBpc0RlbDogdHJ1ZSwgaXNFbnRlcjogdHJ1ZSwgaXNUYWI6IHRydWUsIGlzQ3V0OiB0cnVlLCBpc0VkaXQ6IHRydWUgfSxcclxuICAgICAgICAgIGVkaXRDb25maWc6IE9iamVjdC5hc3NpZ24oe30sIGV4Y2VsRWRpdENvbmZpZywgZWRpdENvbmZpZyksXHJcbiAgICAgICAgICBvcHRpbWl6YXRpb246IHtcclxuICAgICAgICAgICAgc2Nyb2xsWDoge1xyXG4gICAgICAgICAgICAgIGd0OiAxMDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2Nyb2xsWToge1xyXG4gICAgICAgICAgICAgIGd0OiAxMDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICBjb2x1bW5zICh0aGlzOiBhbnksIHZhbHVlOiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgdGhpcy5sb2FkQ29sdW1uKHZhbHVlKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbW91bnRlZCAodGhpczogYW55KSB7XHJcbiAgICAgIGxldCB7IGNvbHVtbnMgfSA9IHRoaXNcclxuICAgICAgaWYgKGNvbHVtbnMgJiYgY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmxvYWRDb2x1bW4odGhpcy5jb2x1bW5zKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVuZGVyICh0aGlzOiBhbnksIGg6IEZ1bmN0aW9uKSB7XHJcbiAgICAgIGxldCB7ICRzbG90cywgJGxpc3RlbmVycywgdGFibGVQcm9wcyB9ID0gdGhpc1xyXG4gICAgICByZXR1cm4gaCgndnhlLXRhYmxlJywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLWV4Y2VsJyxcclxuICAgICAgICBwcm9wczogdGFibGVQcm9wcyxcclxuICAgICAgICBvbjogWEVVdGlscy5hc3NpZ24oe30sICRsaXN0ZW5lcnMsIHtcclxuICAgICAgICAgICdjb250ZXh0LW1lbnUtY2xpY2snOiB0aGlzLmNvbnRleHRNZW51Q2xpY2tFdmVudFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHJlZjogJ3hUYWJsZSdcclxuICAgICAgfSwgJHNsb3RzLmRlZmF1bHQpXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICBbRVhDRUxfTUVUSE9EU19OQU1FLkNPTlRFWFRfTUVOVV9DTElDS19FVkVOVF0gKHRoaXM6IGFueSwgeyBtZW51LCByb3csIGNvbHVtbiB9OiBhbnksIGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGxldCAkdGFibGUgPSB0aGlzLiRyZWZzLnhUYWJsZVxyXG4gICAgICAgIGxldCB7IHByb3BlcnR5IH0gPSBjb2x1bW5cclxuICAgICAgICBzd2l0Y2ggKG1lbnUuY29kZSkge1xyXG4gICAgICAgICAgY2FzZSAnY2xpcCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVDb3B5ZWQodHJ1ZSwgZXZudClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NvcHknOlxyXG4gICAgICAgICAgICAkdGFibGUuaGFuZGxlQ29weWVkKGZhbHNlLCBldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAncGFzdGUnOlxyXG4gICAgICAgICAgICAkdGFibGUuaGFuZGxlUGFzdGUoZXZudClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2luc2VydCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5pbnNlcnRBdCh7fSwgcm93KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAncmVtb3ZlJzpcclxuICAgICAgICAgICAgJHRhYmxlLnJlbW92ZShyb3cpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhckRhdGEnOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJEYXRhKHJvdywgcHJvcGVydHkpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhckZpbHRlcic6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckZpbHRlcihjb2x1bW4pXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdmaWx0ZXJTZWxlY3QnOlxyXG4gICAgICAgICAgICAkdGFibGUuZmlsdGVyKHByb3BlcnR5KVxyXG4gICAgICAgICAgICAgIC50aGVuKChvcHRpb25zOiBBcnJheTxhbnk+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IG9wdGlvbnNbMF1cclxuICAgICAgICAgICAgICAgICAgb3B0aW9uLmRhdGEgPSBYRVV0aWxzLmdldChyb3csIHByb3BlcnR5KVxyXG4gICAgICAgICAgICAgICAgICBvcHRpb24uY2hlY2tlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KS50aGVuKCgpID0+ICR0YWJsZS51cGRhdGVEYXRhKCkpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhclNvcnQnOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJTb3J0KClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3NvcnRBc2MnOlxyXG4gICAgICAgICAgICAkdGFibGUuc29ydChwcm9wZXJ0eSwgJ2FzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdzb3J0RGVzYyc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zb3J0KHByb3BlcnR5LCAnZGVzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdleHBvcnRBbGwnOlxyXG4gICAgICAgICAgICAkdGFibGUuZXhwb3J0RGF0YSh7IGlzSGVhZGVyOiBmYWxzZSB9KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICBjb25zdCB7IGNvbHVtbnMsIHJvd3MgfSA9ICR0YWJsZS5nZXRNb3VzZUNoZWNrZWRzKClcclxuICAgICAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4gcm93TGlzdC5pbmRleE9mKHJvdykgPT09IC0xID8gcm93TGlzdC5wdXNoKHJvdykgOiAwKVxyXG4gICAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBhbnkpID0+IGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID09PSAtMSA/IGNvbExpc3QucHVzaChjb2x1bW4pIDogMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DRUxMX1NQQU5fTUVUSE9EXSAodGhpczogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGxldCB7IHJvdywgJHJvd0luZGV4LCBjb2x1bW4sIGRhdGEgfSA9IHBhcmFtc1xyXG4gICAgICAgIGNvbnN0IHsgY29sTGlzdCwgcm93TGlzdCB9ID0gdGhpcy5tZXJnZVN0b3JlXHJcbiAgICAgICAgaWYgKGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID4gLTEpIHtcclxuICAgICAgICAgIGxldCBwcmV2Um93ID0gZGF0YVskcm93SW5kZXggLSAxXVxyXG4gICAgICAgICAgbGV0IG5leHRSb3cgPSBkYXRhWyRyb3dJbmRleCArIDFdXHJcbiAgICAgICAgICBsZXQgaXNNZXJnZWQgPSByb3dMaXN0LmluZGV4T2Yocm93KSA+IC0xXHJcbiAgICAgICAgICBpZiAocHJldlJvdyAmJiBpc01lcmdlZCAmJiByb3dMaXN0LmluZGV4T2YocHJldlJvdykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiAwLCBjb2xzcGFuOiAwIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudFJvd3NwYW4gPSAxXHJcbiAgICAgICAgICAgIGlmIChpc01lcmdlZCkge1xyXG4gICAgICAgICAgICAgIHdoaWxlIChuZXh0Um93ICYmIHJvd0xpc3QuaW5kZXhPZihuZXh0Um93KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0Um93ID0gZGF0YVsrK2NvdW50Um93c3BhbiArICRyb3dJbmRleF1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvdW50Um93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiBjb3VudFJvd3NwYW4sIGNvbHNwYW46IDEgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOe7p+aJvyBUYWJsZVxyXG4gIFhFVXRpbHMuYXNzaWduKEV4Y2VsLnByb3BzLCBUYWJsZS5wcm9wcylcclxuICBYRVV0aWxzLmVhY2goVGFibGUubWV0aG9kcywgKGNiOiBGdW5jdGlvbiwgbmFtZTogRVhDRUxfTUVUSE9EU19OQU1FKSA9PiB7XHJcbiAgICBFeGNlbC5tZXRob2RzW25hbWVdID0gZnVuY3Rpb24gKHRoaXM6IGFueSkge1xyXG4gICAgICByZXR1cm4gdGhpcy4kcmVmcy54VGFibGVbbmFtZV0uYXBwbHkodGhpcy4kcmVmcy54VGFibGUsIGFyZ3VtZW50cylcclxuICAgIH1cclxuICB9KVxyXG4gIFZ1ZS5jb21wb25lbnQoRXhjZWwubmFtZSwgRXhjZWwpXHJcbn1cclxuXHJcbmNvbnN0IHJvd0hlaWdodDogbnVtYmVyID0gMjRcclxuXHJcbmludGVyZmFjZSBwb3NSYW5nZURhdGEge1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBzdGFydDogbnVtYmVyO1xyXG4gIGVuZDogbnVtYmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IGFueSk6IHBvc1JhbmdlRGF0YSB7XHJcbiAgbGV0IHJhbmdlRGF0YTogcG9zUmFuZ2VEYXRhID0geyB0ZXh0OiAnJywgc3RhcnQ6IDAsIGVuZDogMCB9XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICByYW5nZURhdGEuc3RhcnQgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydFxyXG4gICAgcmFuZ2VEYXRhLmVuZCA9IHRleHRhcmVhLnNlbGVjdGlvbkVuZFxyXG4gIH1cclxuICByZXR1cm4gcmFuZ2VEYXRhXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEN1cnNvclBvc2l0aW9uICh0ZXh0YXJlYTogYW55LCByYW5nZURhdGE6IHBvc1JhbmdlRGF0YSkge1xyXG4gIGlmICh0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgdGV4dGFyZWEuZm9jdXMoKVxyXG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocmFuZ2VEYXRhLnN0YXJ0LCByYW5nZURhdGEuZW5kKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOa4suafk+WHveaVsFxyXG4gKi9cclxuY29uc3QgcmVuZGVyTWFwID0ge1xyXG4gIGNlbGw6IHtcclxuICAgIGF1dG9mb2N1czogJy52eGUtdGV4dGFyZWEtLWlubmVyJyxcclxuICAgIHJlbmRlckVkaXQgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55LCB7ICRleGNlbCB9OiBhbnkpIHtcclxuICAgICAgbGV0IHsgZXhjZWxTdG9yZSB9ID0gJGV4Y2VsXHJcbiAgICAgIGxldCB7IHVwbG9hZFJvd3MgfSA9IGV4Y2VsU3RvcmVcclxuICAgICAgbGV0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICBsZXQgeyBtb2RlbCB9ID0gY29sdW1uXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgY2xhc3M6ICd2eGUtdGV4dGFyZWEgdnhlLWV4Y2VsLWNlbGwnLFxyXG4gICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtjb2x1bW4ucmVuZGVySGVpZ2h0fXB4YFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIFtcclxuICAgICAgICAgIGgoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS10ZXh0YXJlYS0taW5uZXInLFxyXG4gICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiBgJHtjb2x1bW4ucmVuZGVyV2lkdGh9cHhgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgaW5wdXQgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucEVsZW0gPSBldm50LnRhcmdldFxyXG4gICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wRWxlbS5zY3JvbGxIZWlnaHQgPiBpbnBFbGVtLm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS53aWR0aCA9IGAke2lucEVsZW0ub2Zmc2V0V2lkdGggKyAyMH1weGBcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAke2lucEVsZW0uc2Nyb2xsSGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaGFuZ2UgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJvd3MuaW5kZXhPZihyb3cpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGxvYWRSb3dzLnB1c2gocm93KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAga2V5ZG93biAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wRWxlbSA9IGV2bnQudGFyZ2V0XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZudC5hbHRLZXkgJiYgZXZudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICBldm50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgZXZudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VEYXRhID0gZ2V0Q3Vyc29yUG9zaXRpb24oaW5wRWxlbSlcclxuICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IHJhbmdlRGF0YS5lbmRcclxuICAgICAgICAgICAgICAgICAgbGV0IGNlbGxWYWx1ZSA9IGlucEVsZW0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgY2VsbFZhbHVlID0gYCR7Y2VsbFZhbHVlLnNsaWNlKDAsIHBvcyl9XFxuJHtjZWxsVmFsdWUuc2xpY2UocG9zLCBjZWxsVmFsdWUubGVuZ3RoKX1gXHJcbiAgICAgICAgICAgICAgICAgIGlucEVsZW0udmFsdWUgPSBjZWxsVmFsdWVcclxuICAgICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGNlbGxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAkeyhNYXRoLmZsb29yKGlucEVsZW0ub2Zmc2V0SGVpZ2h0IC8gcm93SGVpZ2h0KSArIDEpICogcm93SGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZURhdGEuc3RhcnQgPSByYW5nZURhdGEuZW5kID0gKytwb3NcclxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJzb3JQb3NpdGlvbihpbnBFbGVtLCByYW5nZURhdGEpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIF0pXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICByZW5kZXJDZWxsIChoOiBGdW5jdGlvbiwgZWRpdFJlbmRlcjogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICBsZXQgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlubmVySFRNTDogWEVVdGlscy5lc2NhcGUoWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOWunueOsOeugOWNleeahOiZmuaLn+agkeihqOagvFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luVmlydHVhbFRyZWUgPSB7XHJcbiAgaW5zdGFsbCAoeHRhYmxlOiB0eXBlb2YgVlhFVGFibGUpIHtcclxuICAgIGxldCB7IHJlbmRlcmVyLCB2IH0gPSB4dGFibGVcclxuICAgIGlmICh2ID09PSAndjEnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignW3Z4ZS10YWJsZS1wbHVnaW4tdmlydHVhbC10cmVlXSA+PSBWMiB2ZXJzaW9uIGlzIHJlcXVpcmVkLicpXHJcbiAgICB9XHJcbiAgICAvLyDmt7vliqDliLDmuLLmn5PlmahcclxuICAgIHJlbmRlcmVyLm1peGluKHJlbmRlck1hcClcclxuICAgIC8vIOazqOWGjOe7hOS7tlxyXG4gICAgcmVnaXN0ZXJDb21wb25lbnQoeHRhYmxlKVxyXG4gIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WWEVUYWJsZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSlcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZVxyXG4iXX0=
