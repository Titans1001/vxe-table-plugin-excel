"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginVirtualTree = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  /* eslint-disable no-unused-vars */
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig,
            sortConfig = this.sortConfig,
            filterConfig = this.filterConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            range: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          sortConfig: Object.assign({
            showIcon: false
          }, sortConfig),
          filterConfig: Object.assign({
            showIcon: false
          }, filterConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.setFilter(column, [{
            data: _xeUtils["default"].get(row, property),
            checked: true
          }]);
          $table.updateData();
          $table.clearIndexChecked();
          $table.clearHeaderChecked();
          $table.clearChecked();
          $table.clearSelected();
          $table.clearCopyed();
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _$table$getMouseCheck = $table.getMouseCheckeds(),
              columns = _$table$getMouseCheck.columns,
              rows = _$table$getMouseCheck.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: 'textarea',
    renderEdit: function renderEdit(h, editRender, params) {
      var $table = params.$table,
          row = params.row,
          column = params.column;
      var $excel = $table.$parent;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-textarea vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea--inner',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的虚拟树表格
 */

var VXETablePluginVirtualTree = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-virtual-tree] >= V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginVirtualTree = VXETablePluginVirtualTree;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginVirtualTree);
}

var _default = VXETablePluginVirtualTree;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsInNvcnRDb25maWciLCJmaWx0ZXJDb25maWciLCJYRVV0aWxzIiwiYXNzaWduIiwiYm9yZGVyIiwicmVzaXphYmxlIiwic2hvd092ZXJmbG93IiwiY29udGV4dE1lbnUiLCJtb3VzZUNvbmZpZyIsInNlbGVjdGVkIiwicmFuZ2UiLCJrZXlib2FyZENvbmZpZyIsImlzQXJyb3ciLCJpc0RlbCIsImlzRW50ZXIiLCJpc1RhYiIsImlzQ3V0IiwiaXNFZGl0IiwiT2JqZWN0Iiwib3B0aW1pemF0aW9uIiwic2Nyb2xsWCIsImd0Iiwic2Nyb2xsWSIsIndhdGNoIiwidmFsdWUiLCJsb2FkQ29sdW1uIiwibW91bnRlZCIsImxlbmd0aCIsInJlbmRlciIsImgiLCIkc2xvdHMiLCIkbGlzdGVuZXJzIiwib24iLCJjb250ZXh0TWVudUNsaWNrRXZlbnQiLCJyZWYiLCJtZXRob2RzIiwiQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UIiwiZXZudCIsIm1lbnUiLCJyb3ciLCJjb2x1bW4iLCIkdGFibGUiLCIkcmVmcyIsInhUYWJsZSIsInByb3BlcnR5IiwiaGFuZGxlQ29weWVkIiwiaGFuZGxlUGFzdGUiLCJpbnNlcnRBdCIsInJlbW92ZSIsImNsZWFyRGF0YSIsImNsZWFyRmlsdGVyIiwic2V0RmlsdGVyIiwiZ2V0IiwiY2hlY2tlZCIsInVwZGF0ZURhdGEiLCJjbGVhckluZGV4Q2hlY2tlZCIsImNsZWFySGVhZGVyQ2hlY2tlZCIsImNsZWFyQ2hlY2tlZCIsImNsZWFyU2VsZWN0ZWQiLCJjbGVhckNvcHllZCIsImNsZWFyU29ydCIsInNvcnQiLCJleHBvcnREYXRhIiwiaXNIZWFkZXIiLCJnZXRNb3VzZUNoZWNrZWRzIiwicm93cyIsImZvckVhY2giLCJpbmRleE9mIiwicHVzaCIsIkNFTExfU1BBTl9NRVRIT0QiLCJwYXJhbXMiLCIkcm93SW5kZXgiLCJwcmV2Um93IiwibmV4dFJvdyIsImlzTWVyZ2VkIiwicm93c3BhbiIsImNvbHNwYW4iLCJjb3VudFJvd3NwYW4iLCJlYWNoIiwiY2IiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvbXBvbmVudCIsInJvd0hlaWdodCIsImdldEN1cnNvclBvc2l0aW9uIiwidGV4dGFyZWEiLCJyYW5nZURhdGEiLCJ0ZXh0Iiwic3RhcnQiLCJlbmQiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwic2V0Q3Vyc29yUG9zaXRpb24iLCJmb2N1cyIsInJlbmRlck1hcCIsImNlbGwiLCJhdXRvZm9jdXMiLCJyZW5kZXJFZGl0IiwiZWRpdFJlbmRlciIsIiRleGNlbCIsIiRwYXJlbnQiLCJtb2RlbCIsInN0eWxlIiwiaGVpZ2h0IiwicmVuZGVySGVpZ2h0Iiwid2lkdGgiLCJyZW5kZXJXaWR0aCIsImRvbVByb3BzIiwiaW5wdXQiLCJpbnBFbGVtIiwidGFyZ2V0IiwidXBkYXRlIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJjaGFuZ2UiLCJrZXlkb3duIiwiYWx0S2V5Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicG9zIiwiY2VsbFZhbHVlIiwic2xpY2UiLCJNYXRoIiwiZmxvb3IiLCJzZXRUaW1lb3V0IiwicmVuZGVyQ2VsbCIsImlubmVySFRNTCIsImVzY2FwZSIsInJlcGxhY2UiLCJWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlIiwiaW5zdGFsbCIsInh0YWJsZSIsInJlbmRlcmVyIiwidiIsIkVycm9yIiwibWl4aW4iLCJ3aW5kb3ciLCJWWEVUYWJsZSIsInVzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFHQSxJQUFNQSxlQUFlLEdBQUc7QUFDdEJDLEVBQUFBLE9BQU8sRUFBRSxVQURhO0FBRXRCQyxFQUFBQSxJQUFJLEVBQUUsTUFGZ0I7QUFHdEJDLEVBQUFBLFFBQVEsRUFBRSxLQUhZO0FBSXRCQyxFQUFBQSxVQUFVLEVBQUU7QUFKVSxDQUF4QjtBQU9BLElBQU1DLGdCQUFnQixHQUFHO0FBQ3ZCQyxFQUFBQSxNQUFNLEVBQUU7QUFDTkMsSUFBQUEsT0FBTyxFQUFFLENBQ1AsQ0FDRTtBQUNFQyxNQUFBQSxJQUFJLEVBQUUsV0FEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQURGLEVBS0U7QUFDRUQsTUFBQUEsSUFBSSxFQUFFLFdBRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FMRixDQURPO0FBREgsR0FEZTtBQWV2QkMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pILElBQUFBLE9BQU8sRUFBRSxDQUNQLENBQ0U7QUFDRUMsTUFBQUEsSUFBSSxFQUFFLE1BRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FERixFQUtFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxNQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBTEYsRUFTRTtBQUNFRCxNQUFBQSxJQUFJLEVBQUUsT0FEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQVRGLENBRE8sRUFlUCxDQUNFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxRQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBREYsRUFLRTtBQUNFRCxNQUFBQSxJQUFJLEVBQUUsUUFEUjtBQUVFQyxNQUFBQSxJ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LEVBQUU7QUFDUnFCLFVBQUFBLFNBQVMsRUFBRS9ILG9CQUFRZ0ksTUFBUixDQUFlaEksb0JBQVFrRCxHQUFSLENBQVliLEdBQVosRUFBaUJDLE1BQU0sQ0FBQ0ksUUFBeEIsQ0FBZixFQUFrRHVGLE9BQWxELENBQTBELEtBQTFELEVBQWlFLE1BQWpFO0FBREg7QUFERixPQUFULENBREksQ0FBUDtBQU9EO0FBMUVHO0FBRFUsQ0FBbEI7QUErRUE7Ozs7QUFHTyxJQUFNQyx5QkFBeUIsR0FBRztBQUN2Q0MsRUFBQUEsT0FEdUMsbUJBQzlCQyxNQUQ4QixFQUNQO0FBQUEsUUFDdEJDLFFBRHNCLEdBQ05ELE1BRE0sQ0FDdEJDLFFBRHNCO0FBQUEsUUFDWkMsQ0FEWSxHQUNORixNQURNLENBQ1pFLENBRFk7O0FBRTlCLFFBQUlBLENBQUMsS0FBSyxJQUFWLEVBQWdCO0FBQ2QsWUFBTSxJQUFJQyxLQUFKLENBQVUsNERBQVYsQ0FBTjtBQUNELEtBSjZCLENBSzlCOzs7QUFDQUYsSUFBQUEsUUFBUSxDQUFDRyxLQUFULENBQWUzQyxTQUFmLEVBTjhCLENBTzlCOztBQUNBaEgsSUFBQUEsaUJBQWlCLENBQUN1SixNQUFELENBQWpCO0FBQ0Q7QUFWc0MsQ0FBbEM7OztBQWFQLElBQUksT0FBT0ssTUFBUCxLQUFrQixXQUFsQixJQUFpQ0EsTUFBTSxDQUFDQyxRQUE1QyxFQUFzRDtBQUNwREQsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUFoQixDQUFvQlQseUJBQXBCO0FBQ0Q7O2VBRWNBLHlCIiwiZmlsZSI6ImluZGV4LmNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzL21ldGhvZHMveGUtdXRpbHMnXHJcbmltcG9ydCBWWEVUYWJsZSBmcm9tICd2eGUtdGFibGUvbGliL3Z4ZS10YWJsZSdcclxuXHJcbmNvbnN0IGV4Y2VsRWRpdENvbmZpZyA9IHtcclxuICB0cmlnZ2VyOiAnZGJsY2xpY2snLFxyXG4gIG1vZGU6ICdjZWxsJyxcclxuICBzaG93SWNvbjogZmFsc2UsXHJcbiAgc2hvd1N0YXR1czogZmFsc2VcclxufVxyXG5cclxuY29uc3QgZXhjZWxDb250ZXh0TWVudSA9IHtcclxuICBoZWFkZXI6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+makOiXj+WIlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+WPlua2iOaJgOaciemakOiXjydcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9LFxyXG4gIGJvZHk6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGlwJyxcclxuICAgICAgICAgIG5hbWU6ICfliarotLQoQ3RybCtYKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjb3B5JyxcclxuICAgICAgICAgIG5hbWU6ICflpI3liLYoQ3RybCtDKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdwYXN0ZScsXHJcbiAgICAgICAgICBuYW1lOiAn57KY6LS0KEN0cmwrViknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2luc2VydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o+S5YWlJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3JlbW92ZScsXHJcbiAgICAgICAgICBuYW1lOiAn5Yig6ZmkJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2NsZWFyRGF0YScsXHJcbiAgICAgICAgICBuYW1lOiAn5riF6Zmk5YaF5a65KERlbCknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICAvLyBbXHJcbiAgICAgIC8vICAge1xyXG4gICAgICAvLyAgICAgY29kZTogJ21lcmdlJyxcclxuICAgICAgLy8gICAgIG5hbWU6ICflkIjlubbljZXlhYPmoLwnXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2ZpbHRlcicsXHJcbiAgICAgICAgICBuYW1lOiAn562b6YCJJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJGaWx0ZXInLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfmuIXpmaTnrZvpgIknXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnZmlsdGVyU2VsZWN0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5oyJ5omA6YCJ5Y2V5YWD5qC855qE5YC8562b6YCJJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnc29ydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o6S5bqPJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJTb3J0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk5o6S5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnRBc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfljYfluo8nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnc29ydERlc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICflgJLluo8nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflr7zlh7rmlbDmja4uY3N2J1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gRVhDRUxfTUVUSE9EU19OQU1FIHtcclxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4gIENPTlRFWFRfTUVOVV9DTElDS19FVkVOVCA9ICdjb250ZXh0TWVudUNsaWNrRXZlbnQnLFxyXG4gIENFTExfU1BBTl9NRVRIT0QgPSAnY2VsbFNwYW5NZXRob2QnXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgdkV4Y2VsRGF0YSB7XHJcbiAgZXhjZWxTdG9yZToge1xyXG4gICAgdXBsb2FkUm93czogYW55W107XHJcbiAgfVxyXG4gIG1lcmdlU3RvcmU6IHtcclxuICAgIGNvbExpc3Q6IGFueVtdO1xyXG4gICAgcm93TGlzdDogYW55W107XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudCAoeyBWdWUsIFRhYmxlIH06IGFueSkge1xyXG4gIGNvbnN0IEV4Y2VsOiBhbnkgPSB7XHJcbiAgICBuYW1lOiAnVnhlRXhjZWwnLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgY29sdW1uczogQXJyYXlcclxuICAgIH0sXHJcbiAgICBkYXRhICgpIHtcclxuICAgICAgY29uc3QgZGF0YTogdkV4Y2VsRGF0YSA9IHtcclxuICAgICAgICBleGNlbFN0b3JlOiB7XHJcbiAgICAgICAgICB1cGxvYWRSb3dzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVyZ2VTdG9yZToge1xyXG4gICAgICAgICAgY29sTGlzdDogW10sXHJcbiAgICAgICAgICByb3dMaXN0OiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgIHRhYmxlUHJvcHMgKHRoaXM6IGFueSk6IGFueSB7XHJcbiAgICAgICAgY29uc3QgeyAkcHJvcHMsIGVkaXRDb25maWcsIHNvcnRDb25maWcsIGZpbHRlckNvbmZpZyB9ID0gdGhpc1xyXG4gICAgICAgIHJldHVybiBYRVV0aWxzLmFzc2lnbih7fSwgJHByb3BzLCB7XHJcbiAgICAgICAgICBib3JkZXI6IHRydWUsXHJcbiAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICBzaG93T3ZlcmZsb3c6IG51bGwsXHJcbiAgICAgICAgICAvLyBzcGFuTWV0aG9kOiB0aGlzLmNlbGxTcGFuTWV0aG9kLFxyXG4gICAgICAgICAgY29udGV4dE1lbnU6IGV4Y2VsQ29udGV4dE1lbnUsXHJcbiAgICAgICAgICBtb3VzZUNvbmZpZzogeyBzZWxlY3RlZDogdHJ1ZSwgcmFuZ2U6IHRydWUgfSxcclxuICAgICAgICAgIGtleWJvYXJkQ29uZmlnOiB7IGlzQXJyb3c6IHRydWUsIGlzRGVsOiB0cnVlLCBpc0VudGVyOiB0cnVlLCBpc1RhYjogdHJ1ZSwgaXNDdXQ6IHRydWUsIGlzRWRpdDogdHJ1ZSB9LFxyXG4gICAgICAgICAgZWRpdENvbmZpZzogT2JqZWN0LmFzc2lnbih7fSwgZXhjZWxFZGl0Q29uZmlnLCBlZGl0Q29uZmlnKSxcclxuICAgICAgICAgIHNvcnRDb25maWc6IE9iamVjdC5hc3NpZ24oeyBzaG93SWNvbjogZmFsc2UgfSwgc29ydENvbmZpZyksXHJcbiAgICAgICAgICBmaWx0ZXJDb25maWc6IE9iamVjdC5hc3NpZ24oeyBzaG93SWNvbjogZmFsc2UgfSwgZmlsdGVyQ29uZmlnKSxcclxuICAgICAgICAgIG9wdGltaXphdGlvbjoge1xyXG4gICAgICAgICAgICBzY3JvbGxYOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY3JvbGxZOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhdGNoOiB7XHJcbiAgICAgIGNvbHVtbnMgKHRoaXM6IGFueSwgdmFsdWU6IGFueVtdKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkQ29sdW1uKHZhbHVlKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbW91bnRlZCAodGhpczogYW55KSB7XHJcbiAgICAgIGNvbnN0IHsgY29sdW1ucyB9ID0gdGhpc1xyXG4gICAgICBpZiAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubG9hZENvbHVtbih0aGlzLmNvbHVtbnMpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW5kZXIgKHRoaXM6IGFueSwgaDogRnVuY3Rpb24pIHtcclxuICAgICAgY29uc3QgeyAkc2xvdHMsICRsaXN0ZW5lcnMsIHRhYmxlUHJvcHMgfSA9IHRoaXNcclxuICAgICAgcmV0dXJuIGgoJ3Z4ZS10YWJsZScsIHtcclxuICAgICAgICBjbGFzczogJ3Z4ZS1leGNlbCcsXHJcbiAgICAgICAgcHJvcHM6IHRhYmxlUHJvcHMsXHJcbiAgICAgICAgb246IFhFVXRpbHMuYXNzaWduKHt9LCAkbGlzdGVuZXJzLCB7XHJcbiAgICAgICAgICAnY29udGV4dC1tZW51LWNsaWNrJzogdGhpcy5jb250ZXh0TWVudUNsaWNrRXZlbnRcclxuICAgICAgICB9KSxcclxuICAgICAgICByZWY6ICd4VGFibGUnXHJcbiAgICAgIH0sICRzbG90cy5kZWZhdWx0KVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DT05URVhUX01FTlVfQ0xJQ0tfRVZFTlRdICh0aGlzOiBhbnksIHsgbWVudSwgcm93LCBjb2x1bW4gfTogYW55LCBldm50OiBhbnkpIHtcclxuICAgICAgICBjb25zdCAkdGFibGUgPSB0aGlzLiRyZWZzLnhUYWJsZVxyXG4gICAgICAgIGNvbnN0IHsgcHJvcGVydHkgfSA9IGNvbHVtblxyXG4gICAgICAgIHN3aXRjaCAobWVudS5jb2RlKSB7XHJcbiAgICAgICAgICBjYXNlICdjbGlwJzpcclxuICAgICAgICAgICAgJHRhYmxlLmhhbmRsZUNvcHllZCh0cnVlLCBldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY29weSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVDb3B5ZWQoZmFsc2UsIGV2bnQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdwYXN0ZSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVQYXN0ZShldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmluc2VydEF0KHt9LCByb3cpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdyZW1vdmUnOlxyXG4gICAgICAgICAgICAkdGFibGUucmVtb3ZlKHJvdylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRGF0YSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckRhdGEocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRmlsdGVyJzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyRmlsdGVyKGNvbHVtbilcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2ZpbHRlclNlbGVjdCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zZXRGaWx0ZXIoY29sdW1uLCBbXHJcbiAgICAgICAgICAgICAgeyBkYXRhOiBYRVV0aWxzLmdldChyb3csIHByb3BlcnR5KSwgY2hlY2tlZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICR0YWJsZS51cGRhdGVEYXRhKClcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFySW5kZXhDaGVja2VkKClcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFySGVhZGVyQ2hlY2tlZCgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckNoZWNrZWQoKVxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJTZWxlY3RlZCgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckNvcHllZCgpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhclNvcnQnOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJTb3J0KClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3NvcnRBc2MnOlxyXG4gICAgICAgICAgICAkdGFibGUuc29ydChwcm9wZXJ0eSwgJ2FzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdzb3J0RGVzYyc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zb3J0KHByb3BlcnR5LCAnZGVzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdleHBvcnRBbGwnOlxyXG4gICAgICAgICAgICAkdGFibGUuZXhwb3J0RGF0YSh7IGlzSGVhZGVyOiBmYWxzZSB9KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICBjb25zdCB7IGNvbHVtbnMsIHJvd3MgfSA9ICR0YWJsZS5nZXRNb3VzZUNoZWNrZWRzKClcclxuICAgICAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4gcm93TGlzdC5pbmRleE9mKHJvdykgPT09IC0xID8gcm93TGlzdC5wdXNoKHJvdykgOiAwKVxyXG4gICAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBhbnkpID0+IGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID09PSAtMSA/IGNvbExpc3QucHVzaChjb2x1bW4pIDogMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DRUxMX1NQQU5fTUVUSE9EXSAodGhpczogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHsgcm93LCAkcm93SW5kZXgsIGNvbHVtbiwgZGF0YSB9ID0gcGFyYW1zXHJcbiAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICBpZiAoY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPiAtMSkge1xyXG4gICAgICAgICAgY29uc3QgcHJldlJvdyA9IGRhdGFbJHJvd0luZGV4IC0gMV1cclxuICAgICAgICAgIGxldCBuZXh0Um93ID0gZGF0YVskcm93SW5kZXggKyAxXVxyXG4gICAgICAgICAgY29uc3QgaXNNZXJnZWQgPSByb3dMaXN0LmluZGV4T2Yocm93KSA+IC0xXHJcbiAgICAgICAgICBpZiAocHJldlJvdyAmJiBpc01lcmdlZCAmJiByb3dMaXN0LmluZGV4T2YocHJldlJvdykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiAwLCBjb2xzcGFuOiAwIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudFJvd3NwYW4gPSAxXHJcbiAgICAgICAgICAgIGlmIChpc01lcmdlZCkge1xyXG4gICAgICAgICAgICAgIHdoaWxlIChuZXh0Um93ICYmIHJvd0xpc3QuaW5kZXhPZihuZXh0Um93KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0Um93ID0gZGF0YVsrK2NvdW50Um93c3BhbiArICRyb3dJbmRleF1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvdW50Um93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiBjb3VudFJvd3NwYW4sIGNvbHNwYW46IDEgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOe7p+aJvyBUYWJsZVxyXG4gIFhFVXRpbHMuYXNzaWduKEV4Y2VsLnByb3BzLCBUYWJsZS5wcm9wcylcclxuICBYRVV0aWxzLmVhY2goVGFibGUubWV0aG9kcywgKGNiOiBGdW5jdGlvbiwgbmFtZTogRVhDRUxfTUVUSE9EU19OQU1FKSA9PiB7XHJcbiAgICBFeGNlbC5tZXRob2RzW25hbWVdID0gZnVuY3Rpb24gKHRoaXM6IGFueSkge1xyXG4gICAgICByZXR1cm4gdGhpcy4kcmVmcy54VGFibGVbbmFtZV0uYXBwbHkodGhpcy4kcmVmcy54VGFibGUsIGFyZ3VtZW50cylcclxuICAgIH1cclxuICB9KVxyXG4gIFZ1ZS5jb21wb25lbnQoRXhjZWwubmFtZSwgRXhjZWwpXHJcbn1cclxuXHJcbmNvbnN0IHJvd0hlaWdodDogbnVtYmVyID0gMjRcclxuXHJcbmludGVyZmFjZSBwb3NSYW5nZURhdGEge1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBzdGFydDogbnVtYmVyO1xyXG4gIGVuZDogbnVtYmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IGFueSk6IHBvc1JhbmdlRGF0YSB7XHJcbiAgY29uc3QgcmFuZ2VEYXRhOiBwb3NSYW5nZURhdGEgPSB7IHRleHQ6ICcnLCBzdGFydDogMCwgZW5kOiAwIH1cclxuICBpZiAodGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIHJhbmdlRGF0YS5zdGFydCA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0XHJcbiAgICByYW5nZURhdGEuZW5kID0gdGV4dGFyZWEuc2VsZWN0aW9uRW5kXHJcbiAgfVxyXG4gIHJldHVybiByYW5nZURhdGFcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q3Vyc29yUG9zaXRpb24gKHRleHRhcmVhOiBhbnksIHJhbmdlRGF0YTogcG9zUmFuZ2VEYXRhKSB7XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICB0ZXh0YXJlYS5mb2N1cygpXHJcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShyYW5nZURhdGEuc3RhcnQsIHJhbmdlRGF0YS5lbmQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5riy5p+T5Ye95pWwXHJcbiAqL1xyXG5jb25zdCByZW5kZXJNYXAgPSB7XHJcbiAgY2VsbDoge1xyXG4gICAgYXV0b2ZvY3VzOiAndGV4dGFyZWEnLFxyXG4gICAgcmVuZGVyRWRpdCAoaDogRnVuY3Rpb24sIGVkaXRSZW5kZXI6IGFueSwgcGFyYW1zOiBhbnkpIHtcclxuICAgICAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgY29uc3QgJGV4Y2VsID0gJHRhYmxlLiRwYXJlbnRcclxuICAgICAgY29uc3QgeyBleGNlbFN0b3JlIH0gPSAkZXhjZWxcclxuICAgICAgY29uc3QgeyB1cGxvYWRSb3dzIH0gPSBleGNlbFN0b3JlXHJcbiAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IGNvbHVtblxyXG4gICAgICByZXR1cm4gW1xyXG4gICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgIGNsYXNzOiAndnhlLXRleHRhcmVhIHZ4ZS1leGNlbC1jZWxsJyxcclxuICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgIGhlaWdodDogYCR7Y29sdW1uLnJlbmRlckhlaWdodH1weGBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBbXHJcbiAgICAgICAgICBoKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGV4dGFyZWEtLWlubmVyJyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICB3aWR0aDogYCR7Y29sdW1uLnJlbmRlcldpZHRofXB4YFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkb21Qcm9wczoge1xyXG4gICAgICAgICAgICAgIHZhbHVlOiBtb2RlbC52YWx1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgIGlucHV0IChldm50OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucEVsZW0gPSBldm50LnRhcmdldFxyXG4gICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wRWxlbS5zY3JvbGxIZWlnaHQgPiBpbnBFbGVtLm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS53aWR0aCA9IGAke2lucEVsZW0ub2Zmc2V0V2lkdGggKyAyMH1weGBcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAke2lucEVsZW0uc2Nyb2xsSGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaGFuZ2UgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJvd3MuaW5kZXhPZihyb3cpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGxvYWRSb3dzLnB1c2gocm93KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAga2V5ZG93biAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnBFbGVtID0gZXZudC50YXJnZXRcclxuICAgICAgICAgICAgICAgIGlmIChldm50LmFsdEtleSAmJiBldm50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGV2bnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICBldm50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlRGF0YSA9IGdldEN1cnNvclBvc2l0aW9uKGlucEVsZW0pXHJcbiAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSByYW5nZURhdGEuZW5kXHJcbiAgICAgICAgICAgICAgICAgIGxldCBjZWxsVmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGAke2NlbGxWYWx1ZS5zbGljZSgwLCBwb3MpfVxcbiR7Y2VsbFZhbHVlLnNsaWNlKHBvcywgY2VsbFZhbHVlLmxlbmd0aCl9YFxyXG4gICAgICAgICAgICAgICAgICBpbnBFbGVtLnZhbHVlID0gY2VsbFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIG1vZGVsLnVwZGF0ZSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBjZWxsVmFsdWVcclxuICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS5oZWlnaHQgPSBgJHsoTWF0aC5mbG9vcihpbnBFbGVtLm9mZnNldEhlaWdodCAvIHJvd0hlaWdodCkgKyAxKSAqIHJvd0hlaWdodH1weGBcclxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VEYXRhLnN0YXJ0ID0gcmFuZ2VEYXRhLmVuZCA9ICsrcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3Vyc29yUG9zaXRpb24oaW5wRWxlbSwgcmFuZ2VEYXRhKVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBdKVxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgcmVuZGVyQ2VsbCAoaDogRnVuY3Rpb24sIGVkaXRSZW5kZXI6IGFueSwgcGFyYW1zOiBhbnkpIHtcclxuICAgICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlubmVySFRNTDogWEVVdGlscy5lc2NhcGUoWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOWunueOsOeugOWNleeahOiZmuaLn+agkeihqOagvFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luVmlydHVhbFRyZWUgPSB7XHJcbiAgaW5zdGFsbCAoeHRhYmxlOiB0eXBlb2YgVlhFVGFibGUpIHtcclxuICAgIGNvbnN0IHsgcmVuZGVyZXIsIHYgfSA9IHh0YWJsZVxyXG4gICAgaWYgKHYgPT09ICd2MScpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbdnhlLXRhYmxlLXBsdWdpbi12aXJ0dWFsLXRyZWVdID49IFYyIHZlcnNpb24gaXMgcmVxdWlyZWQuJylcclxuICAgIH1cclxuICAgIC8vIOa3u+WKoOWIsOa4suafk+WZqFxyXG4gICAgcmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKVxyXG4gICAgLy8g5rOo5YaM57uE5Lu2XHJcbiAgICByZWdpc3RlckNvbXBvbmVudCh4dGFibGUpXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlXHJcbiJdfQ==
