"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginVirtualTree = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            checked: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.filter(property).then(function (options) {
            if (options.length) {
              var option = options[0];
              option.data = _xeUtils["default"].get(row, property);
              option.checked = true;
            }
          }).then(function () {
            return $table.updateData();
          });
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _$table$getMouseCheck = $table.getMouseCheckeds(),
              columns = _$table$getMouseCheck.columns,
              rows = _$table$getMouseCheck.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: 'textarea',
    renderEdit: function renderEdit(h, editRender, params, _ref3) {
      var $excel = _ref3.$excel;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var row = params.row,
          column = params.column;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-textarea vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea--inner',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的虚拟树表格
 */

var VXETablePluginVirtualTree = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-virtual-tree] >= V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginVirtualTree = VXETablePluginVirtualTree;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginVirtualTree);
}

var _default = VXETablePluginVirtualTree;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsIlhFVXRpbHMiLCJhc3NpZ24iLCJib3JkZXIiLCJyZXNpemFibGUiLCJzaG93T3ZlcmZsb3ciLCJjb250ZXh0TWVudSIsIm1vdXNlQ29uZmlnIiwic2VsZWN0ZWQiLCJjaGVja2VkIiwia2V5Ym9hcmRDb25maWciLCJpc0Fycm93IiwiaXNEZWwiLCJpc0VudGVyIiwiaXNUYWIiLCJpc0N1dCIsImlzRWRpdCIsIk9iamVjdCIsIm9wdGltaXphdGlvbiIsInNjcm9sbFgiLCJndCIsInNjcm9sbFkiLCJ3YXRjaCIsInZhbHVlIiwibG9hZENvbHVtbiIsIm1vdW50ZWQiLCJsZW5ndGgiLCJyZW5kZXIiLCJoIiwiJHNsb3RzIiwiJGxpc3RlbmVycyIsIm9uIiwiY29udGV4dE1lbnVDbGlja0V2ZW50IiwicmVmIiwibWV0aG9kcyIsIkNPTlRFWFRfTUVOVV9DTElDS19FVkVOVCIsImV2bnQiLCJtZW51Iiwicm93IiwiY29sdW1uIiwiJHRhYmxlIiwiJHJlZnMiLCJ4VGFibGUiLCJwcm9wZXJ0eSIsImhhbmRsZUNvcHllZCIsImhhbmRsZVBhc3RlIiwiaW5zZXJ0QXQiLCJyZW1vdmUiLCJjbGVhckRhdGEiLCJjbGVhckZpbHRlciIsImZpbHRlciIsInRoZW4iLCJvcHRpb24iLCJnZXQiLCJ1cGRhdGVEYXRhIiwiY2xlYXJTb3J0Iiwic29ydCIsImV4cG9ydERhdGEiLCJpc0hlYWRlciIsImdldE1vdXNlQ2hlY2tlZHMiLCJyb3dzIiwiZm9yRWFjaCIsImluZGV4T2YiLCJwdXNoIiwiQ0VMTF9TUEFOX01FVEhPRCIsInBhcmFtcyIsIiRyb3dJbmRleCIsInByZXZSb3ciLCJuZXh0Um93IiwiaXNNZXJnZWQiLCJyb3dzcGFuIiwiY29sc3BhbiIsImNvdW50Um93c3BhbiIsImVhY2giLCJjYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29tcG9uZW50Iiwicm93SGVpZ2h0IiwiZ2V0Q3Vyc29yUG9zaXRpb24iLCJ0ZXh0YXJlYSIsInJhbmdlRGF0YSIsInRleHQiLCJzdGFydCIsImVuZCIsInNldFNlbGVjdGlvblJhbmdlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRDdXJzb3JQb3NpdGlvbiIsImZvY3VzIiwicmVuZGVyTWFwIiwiY2VsbCIsImF1dG9mb2N1cyIsInJlbmRlckVkaXQiLCJlZGl0UmVuZGVyIiwiJGV4Y2VsIiwibW9kZWwiLCJzdHlsZSIsImhlaWdodCIsInJlbmRlckhlaWdodCIsIndpZHRoIiwicmVuZGVyV2lkdGgiLCJkb21Qcm9wcyIsImlucHV0IiwiaW5wRWxlbSIsInRhcmdldCIsInVwZGF0ZSIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiY2hhbmdlIiwia2V5ZG93biIsImFsdEtleSIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBvcyIsImNlbGxWYWx1ZSIsInNsaWNlIiwiTWF0aCIsImZsb29yIiwic2V0VGltZW91dCIsInJlbmRlckNlbGwiLCJpbm5lckhUTUwiLCJlc2NhcGUiLCJyZXBsYWNlIiwiVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSIsImluc3RhbGwiLCJ4dGFibGUiLCJyZW5kZXJlciIsInYiLCJFcnJvciIs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QyxTQUFmLEVBTjhCLENBTzlCOztBQUNBMUcsSUFBQUEsaUJBQWlCLENBQUNnSixNQUFELENBQWpCO0FBQ0Q7QUFWc0MsQ0FBbEM7OztBQWFQLElBQUksT0FBT0ssTUFBUCxLQUFrQixXQUFsQixJQUFpQ0EsTUFBTSxDQUFDQyxRQUE1QyxFQUFzRDtBQUNwREQsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUFoQixDQUFvQlQseUJBQXBCO0FBQ0Q7O2VBRWNBLHlCIiwiZmlsZSI6ImluZGV4LmNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzL21ldGhvZHMveGUtdXRpbHMnXHJcbmltcG9ydCBWWEVUYWJsZSBmcm9tICd2eGUtdGFibGUvbGliL3Z4ZS10YWJsZSdcclxuXHJcbmNvbnN0IGV4Y2VsRWRpdENvbmZpZyA9IHtcclxuICB0cmlnZ2VyOiAnZGJsY2xpY2snLFxyXG4gIG1vZGU6ICdjZWxsJyxcclxuICBzaG93SWNvbjogZmFsc2UsXHJcbiAgc2hvd1N0YXR1czogZmFsc2VcclxufVxyXG5cclxuY29uc3QgZXhjZWxDb250ZXh0TWVudSA9IHtcclxuICBoZWFkZXI6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+makOiXj+WIlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdleHBvcnRBbGwnLFxyXG4gICAgICAgICAgbmFtZTogJ+WPlua2iOaJgOaciemakOiXjydcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9LFxyXG4gIGJvZHk6IHtcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGlwJyxcclxuICAgICAgICAgIG5hbWU6ICfliarotLQoQ3RybCtYKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjb3B5JyxcclxuICAgICAgICAgIG5hbWU6ICflpI3liLYoQ3RybCtDKSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdwYXN0ZScsXHJcbiAgICAgICAgICBuYW1lOiAn57KY6LS0KEN0cmwrViknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2luc2VydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o+S5YWlJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3JlbW92ZScsXHJcbiAgICAgICAgICBuYW1lOiAn5Yig6ZmkJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2NsZWFyRGF0YScsXHJcbiAgICAgICAgICBuYW1lOiAn5riF6Zmk5YaF5a65KERlbCknXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICAvLyBbXHJcbiAgICAgIC8vICAge1xyXG4gICAgICAvLyAgICAgY29kZTogJ21lcmdlJyxcclxuICAgICAgLy8gICAgIG5hbWU6ICflkIjlubbljZXlhYPmoLwnXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2ZpbHRlcicsXHJcbiAgICAgICAgICBuYW1lOiAn562b6YCJJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJGaWx0ZXInLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfmuIXpmaTnrZvpgIknXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnZmlsdGVyU2VsZWN0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5oyJ5omA6YCJ5Y2V5YWD5qC855qE5YC8562b6YCJJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnc29ydCcsXHJcbiAgICAgICAgICBuYW1lOiAn5o6S5bqPJyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnY2xlYXJTb3J0JyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk5o6S5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnRBc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICfljYfluo8nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlOiAnc29ydERlc2MnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICflgJLluo8nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflr7zlh7rmlbDmja4uY3N2J1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gRVhDRUxfTUVUSE9EU19OQU1FIHtcclxuICBDT05URVhUX01FTlVfQ0xJQ0tfRVZFTlQgPSAnY29udGV4dE1lbnVDbGlja0V2ZW50JyxcclxuICBDRUxMX1NQQU5fTUVUSE9EID0gJ2NlbGxTcGFuTWV0aG9kJ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIHZFeGNlbERhdGEge1xyXG4gIGV4Y2VsU3RvcmU6IHtcclxuICAgIHVwbG9hZFJvd3M6IEFycmF5PGFueT47XHJcbiAgfVxyXG4gIG1lcmdlU3RvcmU6IHtcclxuICAgIGNvbExpc3Q6IEFycmF5PGFueT47XHJcbiAgICByb3dMaXN0OiBBcnJheTxhbnk+O1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQgKHsgVnVlLCBUYWJsZSB9OiBhbnkpIHtcclxuICBjb25zdCBFeGNlbDogYW55ID0ge1xyXG4gICAgbmFtZTogJ1Z4ZUV4Y2VsJyxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgIGNvbHVtbnM6IEFycmF5XHJcbiAgICB9LFxyXG4gICAgZGF0YSAoKSB7XHJcbiAgICAgIGxldCBkYXRhOiB2RXhjZWxEYXRhID0ge1xyXG4gICAgICAgIGV4Y2VsU3RvcmU6IHtcclxuICAgICAgICAgIHVwbG9hZFJvd3M6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXJnZVN0b3JlOiB7XHJcbiAgICAgICAgICBjb2xMaXN0OiBbXSxcclxuICAgICAgICAgIHJvd0xpc3Q6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkYXRhXHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgICAgdGFibGVQcm9wcyAodGhpczogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgeyAkcHJvcHMsIGVkaXRDb25maWcgfSA9IHRoaXNcclxuICAgICAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sICRwcm9wcywge1xyXG4gICAgICAgICAgYm9yZGVyOiB0cnVlLFxyXG4gICAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd092ZXJmbG93OiBudWxsLFxyXG4gICAgICAgICAgLy8gc3Bhbk1ldGhvZDogdGhpcy5jZWxsU3Bhbk1ldGhvZCxcclxuICAgICAgICAgIGNvbnRleHRNZW51OiBleGNlbENvbnRleHRNZW51LFxyXG4gICAgICAgICAgbW91c2VDb25maWc6IHsgc2VsZWN0ZWQ6IHRydWUsIGNoZWNrZWQ6IHRydWUgfSxcclxuICAgICAgICAgIGtleWJvYXJkQ29uZmlnOiB7IGlzQXJyb3c6IHRydWUsIGlzRGVsOiB0cnVlLCBpc0VudGVyOiB0cnVlLCBpc1RhYjogdHJ1ZSwgaXNDdXQ6IHRydWUsIGlzRWRpdDogdHJ1ZSB9LFxyXG4gICAgICAgICAgZWRpdENvbmZpZzogT2JqZWN0LmFzc2lnbih7fSwgZXhjZWxFZGl0Q29uZmlnLCBlZGl0Q29uZmlnKSxcclxuICAgICAgICAgIG9wdGltaXphdGlvbjoge1xyXG4gICAgICAgICAgICBzY3JvbGxYOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY3JvbGxZOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhdGNoOiB7XHJcbiAgICAgIGNvbHVtbnMgKHRoaXM6IGFueSwgdmFsdWU6IEFycmF5PGFueT4pIHtcclxuICAgICAgICB0aGlzLmxvYWRDb2x1bW4odmFsdWUpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkICh0aGlzOiBhbnkpIHtcclxuICAgICAgbGV0IHsgY29sdW1ucyB9ID0gdGhpc1xyXG4gICAgICBpZiAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubG9hZENvbHVtbih0aGlzLmNvbHVtbnMpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW5kZXIgKHRoaXM6IGFueSwgaDogRnVuY3Rpb24pIHtcclxuICAgICAgbGV0IHsgJHNsb3RzLCAkbGlzdGVuZXJzLCB0YWJsZVByb3BzIH0gPSB0aGlzXHJcbiAgICAgIHJldHVybiBoKCd2eGUtdGFibGUnLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtZXhjZWwnLFxyXG4gICAgICAgIHByb3BzOiB0YWJsZVByb3BzLFxyXG4gICAgICAgIG9uOiBYRVV0aWxzLmFzc2lnbih7fSwgJGxpc3RlbmVycywge1xyXG4gICAgICAgICAgJ2NvbnRleHQtbWVudS1jbGljayc6IHRoaXMuY29udGV4dE1lbnVDbGlja0V2ZW50XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgcmVmOiAneFRhYmxlJ1xyXG4gICAgICB9LCAkc2xvdHMuZGVmYXVsdClcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgIFtFWENFTF9NRVRIT0RTX05BTUUuQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UXSAodGhpczogYW55LCB7IG1lbnUsIHJvdywgY29sdW1uIH06IGFueSwgZXZudDogYW55KSB7XHJcbiAgICAgICAgbGV0ICR0YWJsZSA9IHRoaXMuJHJlZnMueFRhYmxlXHJcbiAgICAgICAgbGV0IHsgcHJvcGVydHkgfSA9IGNvbHVtblxyXG4gICAgICAgIHN3aXRjaCAobWVudS5jb2RlKSB7XHJcbiAgICAgICAgICBjYXNlICdjbGlwJzpcclxuICAgICAgICAgICAgJHRhYmxlLmhhbmRsZUNvcHllZCh0cnVlLCBldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY29weSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVDb3B5ZWQoZmFsc2UsIGV2bnQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdwYXN0ZSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVQYXN0ZShldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmluc2VydEF0KHt9LCByb3cpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdyZW1vdmUnOlxyXG4gICAgICAgICAgICAkdGFibGUucmVtb3ZlKHJvdylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRGF0YSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckRhdGEocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRmlsdGVyJzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyRmlsdGVyKGNvbHVtbilcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2ZpbHRlclNlbGVjdCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5maWx0ZXIocHJvcGVydHkpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKG9wdGlvbnM6IEFycmF5PGFueT4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gb3B0aW9uc1swXVxyXG4gICAgICAgICAgICAgICAgICBvcHRpb24uZGF0YSA9IFhFVXRpbHMuZ2V0KHJvdywgcHJvcGVydHkpXHJcbiAgICAgICAgICAgICAgICAgIG9wdGlvbi5jaGVja2VkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gJHRhYmxlLnVwZGF0ZURhdGEoKSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyU29ydCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhclNvcnQoKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnc29ydEFzYyc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zb3J0KHByb3BlcnR5LCAnYXNjJylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3NvcnREZXNjJzpcclxuICAgICAgICAgICAgJHRhYmxlLnNvcnQocHJvcGVydHksICdkZXNjJylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2V4cG9ydEFsbCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5leHBvcnREYXRhKHsgaXNIZWFkZXI6IGZhbHNlIH0pXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdtZXJnZSc6XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29sdW1ucywgcm93cyB9ID0gJHRhYmxlLmdldE1vdXNlQ2hlY2tlZHMoKVxyXG4gICAgICAgICAgICBjb25zdCB7IGNvbExpc3QsIHJvd0xpc3QgfSA9IHRoaXMubWVyZ2VTdG9yZVxyXG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggJiYgY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICByb3dzLmZvckVhY2goKHJvdzogYW55KSA9PiByb3dMaXN0LmluZGV4T2Yocm93KSA9PT0gLTEgPyByb3dMaXN0LnB1c2gocm93KSA6IDApXHJcbiAgICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKChjb2x1bW46IGFueSkgPT4gY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPT09IC0xID8gY29sTGlzdC5wdXNoKGNvbHVtbikgOiAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBbRVhDRUxfTUVUSE9EU19OQU1FLkNFTExfU1BBTl9NRVRIT0RdICh0aGlzOiBhbnksIHBhcmFtczogYW55KSB7XHJcbiAgICAgICAgbGV0IHsgcm93LCAkcm93SW5kZXgsIGNvbHVtbiwgZGF0YSB9ID0gcGFyYW1zXHJcbiAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICBpZiAoY29sTGlzdC5pbmRleE9mKGNvbHVtbikgPiAtMSkge1xyXG4gICAgICAgICAgbGV0IHByZXZSb3cgPSBkYXRhWyRyb3dJbmRleCAtIDFdXHJcbiAgICAgICAgICBsZXQgbmV4dFJvdyA9IGRhdGFbJHJvd0luZGV4ICsgMV1cclxuICAgICAgICAgIGxldCBpc01lcmdlZCA9IHJvd0xpc3QuaW5kZXhPZihyb3cpID4gLTFcclxuICAgICAgICAgIGlmIChwcmV2Um93ICYmIGlzTWVyZ2VkICYmIHJvd0xpc3QuaW5kZXhPZihwcmV2Um93KSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHJvd3NwYW46IDAsIGNvbHNwYW46IDAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNvdW50Um93c3BhbiA9IDFcclxuICAgICAgICAgICAgaWYgKGlzTWVyZ2VkKSB7XHJcbiAgICAgICAgICAgICAgd2hpbGUgKG5leHRSb3cgJiYgcm93TGlzdC5pbmRleE9mKG5leHRSb3cpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIG5leHRSb3cgPSBkYXRhWysrY291bnRSb3dzcGFuICsgJHJvd0luZGV4XVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY291bnRSb3dzcGFuID4gMSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB7IHJvd3NwYW46IGNvdW50Um93c3BhbiwgY29sc3BhbjogMSB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLy8g57un5om/IFRhYmxlXHJcbiAgWEVVdGlscy5hc3NpZ24oRXhjZWwucHJvcHMsIFRhYmxlLnByb3BzKVxyXG4gIFhFVXRpbHMuZWFjaChUYWJsZS5tZXRob2RzLCAoY2I6IEZ1bmN0aW9uLCBuYW1lOiBFWENFTF9NRVRIT0RTX05BTUUpID0+IHtcclxuICAgIEV4Y2VsLm1ldGhvZHNbbmFtZV0gPSBmdW5jdGlvbiAodGhpczogYW55KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiRyZWZzLnhUYWJsZVtuYW1lXS5hcHBseSh0aGlzLiRyZWZzLnhUYWJsZSwgYXJndW1lbnRzKVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgVnVlLmNvbXBvbmVudChFeGNlbC5uYW1lLCBFeGNlbClcclxufVxyXG5cclxuY29uc3Qgcm93SGVpZ2h0OiBudW1iZXIgPSAyNFxyXG5cclxuaW50ZXJmYWNlIHBvc1JhbmdlRGF0YSB7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIHN0YXJ0OiBudW1iZXI7XHJcbiAgZW5kOiBudW1iZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEN1cnNvclBvc2l0aW9uICh0ZXh0YXJlYTogYW55KTogcG9zUmFuZ2VEYXRhIHtcclxuICBsZXQgcmFuZ2VEYXRhOiBwb3NSYW5nZURhdGEgPSB7IHRleHQ6ICcnLCBzdGFydDogMCwgZW5kOiAwIH1cclxuICBpZiAodGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIHJhbmdlRGF0YS5zdGFydCA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0XHJcbiAgICByYW5nZURhdGEuZW5kID0gdGV4dGFyZWEuc2VsZWN0aW9uRW5kXHJcbiAgfVxyXG4gIHJldHVybiByYW5nZURhdGFcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q3Vyc29yUG9zaXRpb24gKHRleHRhcmVhOiBhbnksIHJhbmdlRGF0YTogcG9zUmFuZ2VEYXRhKSB7XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICB0ZXh0YXJlYS5mb2N1cygpXHJcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShyYW5nZURhdGEuc3RhcnQsIHJhbmdlRGF0YS5lbmQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5riy5p+T5Ye95pWwXHJcbiAqL1xyXG5jb25zdCByZW5kZXJNYXAgPSB7XHJcbiAgY2VsbDoge1xyXG4gICAgYXV0b2ZvY3VzOiAndGV4dGFyZWEnLFxyXG4gICAgcmVuZGVyRWRpdCAoaDogRnVuY3Rpb24sIGVkaXRSZW5kZXI6IGFueSwgcGFyYW1zOiBhbnksIHsgJGV4Y2VsIH06IGFueSkge1xyXG4gICAgICBsZXQgeyBleGNlbFN0b3JlIH0gPSAkZXhjZWxcclxuICAgICAgbGV0IHsgdXBsb2FkUm93cyB9ID0gZXhjZWxTdG9yZVxyXG4gICAgICBsZXQgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIGxldCB7IG1vZGVsIH0gPSBjb2x1bW5cclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgICBjbGFzczogJ3Z4ZS10ZXh0YXJlYSB2eGUtZXhjZWwtY2VsbCcsXHJcbiAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IGAke2NvbHVtbi5yZW5kZXJIZWlnaHR9cHhgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgW1xyXG4gICAgICAgICAgaCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIGNsYXNzOiAndnhlLXRleHRhcmVhLS1pbm5lcicsXHJcbiAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IGAke2NvbHVtbi5yZW5kZXJXaWR0aH1weGBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZG9tUHJvcHM6IHtcclxuICAgICAgICAgICAgICB2YWx1ZTogbW9kZWwudmFsdWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICBpbnB1dCAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wRWxlbSA9IGV2bnQudGFyZ2V0XHJcbiAgICAgICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGlucEVsZW0udmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChpbnBFbGVtLnNjcm9sbEhlaWdodCA+IGlucEVsZW0ub2Zmc2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSb3dzLmluZGV4T2Yocm93KSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLndpZHRoID0gYCR7aW5wRWxlbS5vZmZzZXRXaWR0aCArIDIwfXB4YFxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7aW5wRWxlbS5zY3JvbGxIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGNoYW5nZSAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVwbG9hZFJvd3MucHVzaChyb3cpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBrZXlkb3duIChldm50OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnBFbGVtID0gZXZudC50YXJnZXRcclxuICAgICAgICAgICAgICAgIGlmIChldm50LmFsdEtleSAmJiBldm50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGV2bnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICBldm50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgIGxldCByYW5nZURhdGEgPSBnZXRDdXJzb3JQb3NpdGlvbihpbnBFbGVtKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgcG9zID0gcmFuZ2VEYXRhLmVuZFxyXG4gICAgICAgICAgICAgICAgICBsZXQgY2VsbFZhbHVlID0gaW5wRWxlbS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICBjZWxsVmFsdWUgPSBgJHtjZWxsVmFsdWUuc2xpY2UoMCwgcG9zKX1cXG4ke2NlbGxWYWx1ZS5zbGljZShwb3MsIGNlbGxWYWx1ZS5sZW5ndGgpfWBcclxuICAgICAgICAgICAgICAgICAgaW5wRWxlbS52YWx1ZSA9IGNlbGxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIG1vZGVsLnZhbHVlID0gY2VsbFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIGlucEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7KE1hdGguZmxvb3IoaW5wRWxlbS5vZmZzZXRIZWlnaHQgLyByb3dIZWlnaHQpICsgMSkgKiByb3dIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlRGF0YS5zdGFydCA9IHJhbmdlRGF0YS5lbmQgPSArK3Bvc1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnNvclBvc2l0aW9uKGlucEVsZW0sIHJhbmdlRGF0YSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgXSlcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIHJlbmRlckNlbGwgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55KSB7XHJcbiAgICAgIGxldCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgICAgZG9tUHJvcHM6IHtcclxuICAgICAgICAgICAgaW5uZXJIVE1MOiBYRVV0aWxzLmVzY2FwZShYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSkpLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgXVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE5aKe5by65o+S5Lu277yM5a6e546w566A5Y2V55qE6Jma5ouf5qCR6KGo5qC8XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSA9IHtcclxuICBpbnN0YWxsICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgbGV0IHsgcmVuZGVyZXIsIHYgfSA9IHh0YWJsZVxyXG4gICAgaWYgKHYgPT09ICd2MScpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbdnhlLXRhYmxlLXBsdWdpbi12aXJ0dWFsLXRyZWVdID49IFYyIHZlcnNpb24gaXMgcmVxdWlyZWQuJylcclxuICAgIH1cclxuICAgIC8vIOa3u+WKoOWIsOa4suafk+WZqFxyXG4gICAgcmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKVxyXG4gICAgLy8g5rOo5YaM57uE5Lu2XHJcbiAgICByZWdpc3RlckNvbXBvbmVudCh4dGFibGUpXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlXHJcbiJdfQ==
