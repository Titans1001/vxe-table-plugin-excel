"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginVirtualTree = exports.EXCEL_METHODS_NAME = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var excelEditConfig = {
  trigger: 'dblclick',
  mode: 'cell',
  showIcon: false,
  showStatus: false
};
var excelContextMenu = {
  header: {
    options: [[{
      code: 'exportAll',
      name: '隐藏列'
    }, {
      code: 'exportAll',
      name: '取消所有隐藏'
    }]]
  },
  body: {
    options: [[{
      code: 'clip',
      name: '剪贴(Ctrl+X)'
    }, {
      code: 'copy',
      name: '复制(Ctrl+C)'
    }, {
      code: 'paste',
      name: '粘贴(Ctrl+V)'
    }], [{
      code: 'insert',
      name: '插入'
    }, {
      code: 'remove',
      name: '删除'
    }, {
      code: 'clearData',
      name: '清除内容(Del)'
    }], // [
    //   {
    //     code: 'merge',
    //     name: '合并单元格'
    //   }
    // ],
    [{
      code: 'filter',
      name: '筛选',
      children: [{
        code: 'clearFilter',
        name: '清除筛选'
      }, {
        code: 'filterSelect',
        name: '按所选单元格的值筛选'
      }]
    }, {
      code: 'sort',
      name: '排序',
      children: [{
        code: 'clearSort',
        name: '清除排序'
      }, {
        code: 'sortAsc',
        name: '升序'
      }, {
        code: 'sortDesc',
        name: '倒序'
      }]
    }], [{
      code: 'exportAll',
      name: '导出数据.csv'
    }]]
  }
};
var EXCEL_METHODS_NAME;
exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME;

(function (EXCEL_METHODS_NAME) {
  EXCEL_METHODS_NAME["CONTEXT_MENU_CLICK_EVENT"] = "contextMenuClickEvent";
  EXCEL_METHODS_NAME["CELL_SPAN_METHOD"] = "cellSpanMethod";
})(EXCEL_METHODS_NAME || (exports.EXCEL_METHODS_NAME = EXCEL_METHODS_NAME = {}));

function registerComponent(_ref) {
  var _methods;

  var Vue = _ref.Vue,
      Table = _ref.Table;
  var Excel = {
    name: 'VxeExcel',
    props: {
      columns: Array
    },
    data: function data() {
      var data = {
        excelStore: {
          uploadRows: []
        },
        mergeStore: {
          colList: [],
          rowList: []
        }
      };
      return data;
    },
    computed: {
      tableProps: function tableProps() {
        var $props = this.$props,
            editConfig = this.editConfig,
            sortConfig = this.sortConfig,
            filterConfig = this.filterConfig;
        return _xeUtils["default"].assign({}, $props, {
          border: true,
          resizable: true,
          showOverflow: null,
          // spanMethod: this.cellSpanMethod,
          contextMenu: excelContextMenu,
          mouseConfig: {
            selected: true,
            checked: true
          },
          keyboardConfig: {
            isArrow: true,
            isDel: true,
            isEnter: true,
            isTab: true,
            isCut: true,
            isEdit: true
          },
          editConfig: Object.assign({}, excelEditConfig, editConfig),
          sortConfig: Object.assign({
            showIcon: false
          }, sortConfig),
          filterConfig: Object.assign({
            showIcon: false
          }, filterConfig),
          optimization: {
            scrollX: {
              gt: 100
            },
            scrollY: {
              gt: 100
            }
          }
        });
      }
    },
    watch: {
      columns: function columns(value) {
        this.loadColumn(value);
      }
    },
    mounted: function mounted() {
      var columns = this.columns;

      if (columns && columns.length) {
        this.loadColumn(this.columns);
      }
    },
    render: function render(h) {
      var $slots = this.$slots,
          $listeners = this.$listeners,
          tableProps = this.tableProps;
      return h('vxe-table', {
        "class": 'vxe-excel',
        props: tableProps,
        on: _xeUtils["default"].assign({}, $listeners, {
          'context-menu-click': this.contextMenuClickEvent
        }),
        ref: 'xTable'
      }, $slots["default"]);
    },
    methods: (_methods = {}, _defineProperty(_methods, EXCEL_METHODS_NAME.CONTEXT_MENU_CLICK_EVENT, function (_ref2, evnt) {
      var menu = _ref2.menu,
          row = _ref2.row,
          column = _ref2.column;
      var $table = this.$refs.xTable;
      var property = column.property;

      switch (menu.code) {
        case 'clip':
          $table.handleCopyed(true, evnt);
          break;

        case 'copy':
          $table.handleCopyed(false, evnt);
          break;

        case 'paste':
          $table.handlePaste(evnt);
          break;

        case 'insert':
          $table.insertAt({}, row);
          break;

        case 'remove':
          $table.remove(row);
          break;

        case 'clearData':
          $table.clearData(row, property);
          break;

        case 'clearFilter':
          $table.clearFilter(column);
          break;

        case 'filterSelect':
          $table.setFilter(column, [{
            data: _xeUtils["default"].get(row, property),
            checked: true
          }]);
          $table.updateData();
          $table.clearIndexChecked();
          $table.clearHeaderChecked();
          $table.clearChecked();
          $table.clearSelected();
          $table.clearCopyed();
          break;

        case 'clearSort':
          $table.clearSort();
          break;

        case 'sortAsc':
          $table.sort(property, 'asc');
          break;

        case 'sortDesc':
          $table.sort(property, 'desc');
          break;

        case 'exportAll':
          $table.exportData({
            isHeader: false
          });
          break;

        case 'merge':
          var _$table$getMouseCheck = $table.getMouseCheckeds(),
              columns = _$table$getMouseCheck.columns,
              rows = _$table$getMouseCheck.rows;

          var _this$mergeStore = this.mergeStore,
              colList = _this$mergeStore.colList,
              rowList = _this$mergeStore.rowList;

          if (rows.length && columns.length) {
            rows.forEach(function (row) {
              return rowList.indexOf(row) === -1 ? rowList.push(row) : 0;
            });
            columns.forEach(function (column) {
              return colList.indexOf(column) === -1 ? colList.push(column) : 0;
            });
          }

          break;
      }
    }), _defineProperty(_methods, EXCEL_METHODS_NAME.CELL_SPAN_METHOD, function (params) {
      var row = params.row,
          $rowIndex = params.$rowIndex,
          column = params.column,
          data = params.data;
      var _this$mergeStore2 = this.mergeStore,
          colList = _this$mergeStore2.colList,
          rowList = _this$mergeStore2.rowList;

      if (colList.indexOf(column) > -1) {
        var prevRow = data[$rowIndex - 1];
        var nextRow = data[$rowIndex + 1];
        var isMerged = rowList.indexOf(row) > -1;

        if (prevRow && isMerged && rowList.indexOf(prevRow) > -1) {
          return {
            rowspan: 0,
            colspan: 0
          };
        } else {
          var countRowspan = 1;

          if (isMerged) {
            while (nextRow && rowList.indexOf(nextRow) > -1) {
              nextRow = data[++countRowspan + $rowIndex];
            }
          }

          if (countRowspan > 1) {
            return {
              rowspan: countRowspan,
              colspan: 1
            };
          }
        }
      }
    }), _methods)
  }; // 继承 Table

  _xeUtils["default"].assign(Excel.props, Table.props);

  _xeUtils["default"].each(Table.methods, function (cb, name) {
    Excel.methods[name] = function () {
      return this.$refs.xTable[name].apply(this.$refs.xTable, arguments);
    };
  });

  Vue.component(Excel.name, Excel);
}

var rowHeight = 24;

function getCursorPosition(textarea) {
  var rangeData = {
    text: '',
    start: 0,
    end: 0
  };

  if (textarea.setSelectionRange) {
    rangeData.start = textarea.selectionStart;
    rangeData.end = textarea.selectionEnd;
  }

  return rangeData;
}

function setCursorPosition(textarea, rangeData) {
  if (textarea.setSelectionRange) {
    textarea.focus();
    textarea.setSelectionRange(rangeData.start, rangeData.end);
  }
}
/**
 * 渲染函数
 */


var renderMap = {
  cell: {
    autofocus: 'textarea',
    renderEdit: function renderEdit(h, editRender, params, _ref3) {
      var $excel = _ref3.$excel;
      var excelStore = $excel.excelStore;
      var uploadRows = excelStore.uploadRows;
      var row = params.row,
          column = params.column;
      var model = column.model;
      return [h('div', {
        "class": 'vxe-textarea vxe-excel-cell',
        style: {
          height: "".concat(column.renderHeight, "px")
        }
      }, [h('textarea', {
        "class": 'vxe-textarea--inner',
        style: {
          width: "".concat(column.renderWidth, "px")
        },
        domProps: {
          value: model.value
        },
        on: {
          input: function input(evnt) {
            var inpElem = evnt.target;
            model.update = true;
            model.value = inpElem.value;

            if (inpElem.scrollHeight > inpElem.offsetHeight) {
              if (uploadRows.indexOf(row) === -1) {
                inpElem.style.width = "".concat(inpElem.offsetWidth + 20, "px");
              } else {
                inpElem.style.height = "".concat(inpElem.scrollHeight, "px");
              }
            }
          },
          change: function change(evnt) {
            if (uploadRows.indexOf(row) === -1) {
              uploadRows.push(row);
            }
          },
          keydown: function keydown(evnt) {
            var inpElem = evnt.target;

            if (evnt.altKey && evnt.keyCode === 13) {
              evnt.preventDefault();
              evnt.stopPropagation();
              var rangeData = getCursorPosition(inpElem);
              var pos = rangeData.end;
              var cellValue = inpElem.value;
              cellValue = "".concat(cellValue.slice(0, pos), "\n").concat(cellValue.slice(pos, cellValue.length));
              inpElem.value = cellValue;
              model.update = true;
              model.value = cellValue;
              inpElem.style.height = "".concat((Math.floor(inpElem.offsetHeight / rowHeight) + 1) * rowHeight, "px");
              setTimeout(function () {
                rangeData.start = rangeData.end = ++pos;
                setCursorPosition(inpElem, rangeData);
              });
            }
          }
        }
      })])];
    },
    renderCell: function renderCell(h, editRender, params) {
      var row = params.row,
          column = params.column;
      return [h('span', {
        domProps: {
          innerHTML: _xeUtils["default"].escape(_xeUtils["default"].get(row, column.property)).replace(/\n/g, '<br>')
        }
      })];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，实现简单的虚拟树表格
 */

var VXETablePluginVirtualTree = {
  install: function install(xtable) {
    var renderer = xtable.renderer,
        v = xtable.v;

    if (v === 'v1') {
      throw new Error('[vxe-table-plugin-virtual-tree] >= V2 version is required.');
    } // 添加到渲染器


    renderer.mixin(renderMap); // 注册组件

    registerComponent(xtable);
  }
};
exports.VXETablePluginVirtualTree = VXETablePluginVirtualTree;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginVirtualTree);
}

var _default = VXETablePluginVirtualTree;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImV4Y2VsRWRpdENvbmZpZyIsInRyaWdnZXIiLCJtb2RlIiwic2hvd0ljb24iLCJzaG93U3RhdHVzIiwiZXhjZWxDb250ZXh0TWVudSIsImhlYWRlciIsIm9wdGlvbnMiLCJjb2RlIiwibmFtZSIsImJvZHkiLCJjaGlsZHJlbiIsIkVYQ0VMX01FVEhPRFNfTkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVnVlIiwiVGFibGUiLCJFeGNlbCIsInByb3BzIiwiY29sdW1ucyIsIkFycmF5IiwiZGF0YSIsImV4Y2VsU3RvcmUiLCJ1cGxvYWRSb3dzIiwibWVyZ2VTdG9yZSIsImNvbExpc3QiLCJyb3dMaXN0IiwiY29tcHV0ZWQiLCJ0YWJsZVByb3BzIiwiJHByb3BzIiwiZWRpdENvbmZpZyIsInNvcnRDb25maWciLCJmaWx0ZXJDb25maWciLCJYRVV0aWxzIiwiYXNzaWduIiwiYm9yZGVyIiwicmVzaXphYmxlIiwic2hvd092ZXJmbG93IiwiY29udGV4dE1lbnUiLCJtb3VzZUNvbmZpZyIsInNlbGVjdGVkIiwiY2hlY2tlZCIsImtleWJvYXJkQ29uZmlnIiwiaXNBcnJvdyIsImlzRGVsIiwiaXNFbnRlciIsImlzVGFiIiwiaXNDdXQiLCJpc0VkaXQiLCJPYmplY3QiLCJvcHRpbWl6YXRpb24iLCJzY3JvbGxYIiwiZ3QiLCJzY3JvbGxZIiwid2F0Y2giLCJ2YWx1ZSIsImxvYWRDb2x1bW4iLCJtb3VudGVkIiwibGVuZ3RoIiwicmVuZGVyIiwiaCIsIiRzbG90cyIsIiRsaXN0ZW5lcnMiLCJvbiIsImNvbnRleHRNZW51Q2xpY2tFdmVudCIsInJlZiIsIm1ldGhvZHMiLCJDT05URVhUX01FTlVfQ0xJQ0tfRVZFTlQiLCJldm50IiwibWVudSIsInJvdyIsImNvbHVtbiIsIiR0YWJsZSIsIiRyZWZzIiwieFRhYmxlIiwicHJvcGVydHkiLCJoYW5kbGVDb3B5ZWQiLCJoYW5kbGVQYXN0ZSIsImluc2VydEF0IiwicmVtb3ZlIiwiY2xlYXJEYXRhIiwiY2xlYXJGaWx0ZXIiLCJzZXRGaWx0ZXIiLCJnZXQiLCJ1cGRhdGVEYXRhIiwiY2xlYXJJbmRleENoZWNrZWQiLCJjbGVhckhlYWRlckNoZWNrZWQiLCJjbGVhckNoZWNrZWQiLCJjbGVhclNlbGVjdGVkIiwiY2xlYXJDb3B5ZWQiLCJjbGVhclNvcnQiLCJzb3J0IiwiZXhwb3J0RGF0YSIsImlzSGVhZGVyIiwiZ2V0TW91c2VDaGVja2VkcyIsInJvd3MiLCJmb3JFYWNoIiwiaW5kZXhPZiIsInB1c2giLCJDRUxMX1NQQU5fTUVUSE9EIiwicGFyYW1zIiwiJHJvd0luZGV4IiwicHJldlJvdyIsIm5leHRSb3ciLCJpc01lcmdlZCIsInJvd3NwYW4iLCJjb2xzcGFuIiwiY291bnRSb3dzcGFuIiwiZWFjaCIsImNiIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjb21wb25lbnQiLCJyb3dIZWlnaHQiLCJnZXRDdXJzb3JQb3NpdGlvbiIsInRleHRhcmVhIiwicmFuZ2VEYXRhIiwidGV4dCIsInN0YXJ0IiwiZW5kIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsInNldEN1cnNvclBvc2l0aW9uIiwiZm9jdXMiLCJyZW5kZXJNYXAiLCJjZWxsIiwiYXV0b2ZvY3VzIiwicmVuZGVyRWRpdCIsImVkaXRSZW5kZXIiLCIkZXhjZWwiLCJtb2RlbCIsInN0eWxlIiwiaGVpZ2h0IiwicmVuZGVySGVpZ2h0Iiwid2lkdGgiLCJyZW5kZXJXaWR0aCIsImRvbVByb3BzIiwiaW5wdXQiLCJpbnBFbGVtIiwidGFyZ2V0IiwidXBkYXRlIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJjaGFuZ2UiLCJrZXlkb3duIiwiYWx0S2V5Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicG9zIiwiY2VsbFZhbHVlIiwic2xpY2UiLCJNYXRoIiwiZmxvb3IiLCJzZXRUaW1lb3V0IiwicmVuZGVyQ2VsbCIsImlubmVySFRNTCIsImVzY2FwZSIsInJlcGxhY2UiLCJWWEVUYWJsZVBsdWdpblZpcnR1YWxUcmVlIiwiaW5zdGFsbCIsInh0YWJsZSIsInJlbmRlcmVyIiwidiIsIkVycm9yIiwibWl4aW4iLCJ3aW5kb3ciLCJWWEVUYWJsZSIsInVzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFHQSxJQUFNQSxlQUFlLEdBQUc7QUFDdEJDLEVBQUFBLE9BQU8sRUFBRSxVQURhO0FBRXRCQyxFQUFBQSxJQUFJLEVBQUUsTUFGZ0I7QUFHdEJDLEVBQUFBLFFBQVEsRUFBRSxLQUhZO0FBSXRCQyxFQUFBQSxVQUFVLEVBQUU7QUFKVSxDQUF4QjtBQU9BLElBQU1DLGdCQUFnQixHQUFHO0FBQ3ZCQyxFQUFBQSxNQUFNLEVBQUU7QUFDTkMsSUFBQUEsT0FBTyxFQUFFLENBQ1AsQ0FDRTtBQUNFQyxNQUFBQSxJQUFJLEVBQUUsV0FEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQURGLEVBS0U7QUFDRUQsTUFBQUEsSUFBSSxFQUFFLFdBRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FMRixDQURPO0FBREgsR0FEZTtBQWV2QkMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pILElBQUFBLE9BQU8sRUFBRSxDQUNQLENBQ0U7QUFDRUMsTUFBQUEsSUFBSSxFQUFFLE1BRFI7QUFFRUMsTUFBQUEsSUFBSSxFQUFFO0FBRlIsS0FERixFQUtFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxNQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBTEYsRUFTRTtBQUNFRCxNQUFBQSxJQUFJLEVBQUUsT0FEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQVRGLENBRE8sRUFlUCxDQUNFO0FBQ0VELE1BQUFBLElBQUksRUFBRSxRQURSO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBREYsRUFLRTtBQUNFRCxNQUFBQSxJQUFJLEVBQUUsUUFEUjtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQUxG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LENBQUNJLFFBQXhCLENBQWYsRUFBa0RxRixPQUFsRCxDQUEwRCxLQUExRCxFQUFpRSxNQUFqRTtBQURIO0FBREYsT0FBVCxDQURJLENBQVA7QUFPRDtBQXpFRztBQURVLENBQWxCO0FBOEVBOzs7O0FBR08sSUFBTUMseUJBQXlCLEdBQUc7QUFDdkNDLEVBQUFBLE9BRHVDLG1CQUM5QkMsTUFEOEIsRUFDUDtBQUFBLFFBQ3hCQyxRQUR3QixHQUNSRCxNQURRLENBQ3hCQyxRQUR3QjtBQUFBLFFBQ2RDLENBRGMsR0FDUkYsTUFEUSxDQUNkRSxDQURjOztBQUU5QixRQUFJQSxDQUFDLEtBQUssSUFBVixFQUFnQjtBQUNkLFlBQU0sSUFBSUMsS0FBSixDQUFVLDREQUFWLENBQU47QUFDRCxLQUo2QixDQUs5Qjs7O0FBQ0FGLElBQUFBLFFBQVEsQ0FBQ0csS0FBVCxDQUFlMUMsU0FBZixFQU44QixDQU85Qjs7QUFDQS9HLElBQUFBLGlCQUFpQixDQUFDcUosTUFBRCxDQUFqQjtBQUNEO0FBVnNDLENBQWxDOzs7QUFhUCxJQUFJLE9BQU9LLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUNBLE1BQU0sQ0FBQ0MsUUFBNUMsRUFBc0Q7QUFDcERELEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0JULHlCQUFwQjtBQUNEOztlQUVjQSx5QiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG5pbXBvcnQgVlhFVGFibGUgZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcblxyXG5jb25zdCBleGNlbEVkaXRDb25maWcgPSB7XHJcbiAgdHJpZ2dlcjogJ2RibGNsaWNrJyxcclxuICBtb2RlOiAnY2VsbCcsXHJcbiAgc2hvd0ljb246IGZhbHNlLFxyXG4gIHNob3dTdGF0dXM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGV4Y2VsQ29udGV4dE1lbnUgPSB7XHJcbiAgaGVhZGVyOiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICfpmpDol4/liJcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnZXhwb3J0QWxsJyxcclxuICAgICAgICAgIG5hbWU6ICflj5bmtojmiYDmnInpmpDol48nXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICBdXHJcbiAgfSxcclxuICBib2R5OiB7XHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY2xpcCcsXHJcbiAgICAgICAgICBuYW1lOiAn5Ymq6LS0KEN0cmwrWCknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAnY29weScsXHJcbiAgICAgICAgICBuYW1lOiAn5aSN5Yi2KEN0cmwrQyknXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2RlOiAncGFzdGUnLFxyXG4gICAgICAgICAgbmFtZTogJ+eymOi0tChDdHJsK1YpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdpbnNlcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aPkuWFpSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdyZW1vdmUnLFxyXG4gICAgICAgICAgbmFtZTogJ+WIoOmZpCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdjbGVhckRhdGEnLFxyXG4gICAgICAgICAgbmFtZTogJ+a4hemZpOWGheWuuShEZWwpJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgLy8gW1xyXG4gICAgICAvLyAgIHtcclxuICAgICAgLy8gICAgIGNvZGU6ICdtZXJnZScsXHJcbiAgICAgIC8vICAgICBuYW1lOiAn5ZCI5bm25Y2V5YWD5qC8J1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gXSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvZGU6ICdmaWx0ZXInLFxyXG4gICAgICAgICAgbmFtZTogJ+etm+mAiScsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyRmlsdGVyJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5riF6Zmk562b6YCJJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2ZpbHRlclNlbGVjdCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+aMieaJgOmAieWNleWFg+agvOeahOWAvOetm+mAiSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ3NvcnQnLFxyXG4gICAgICAgICAgbmFtZTogJ+aOkuW6jycsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ2NsZWFyU29ydCcsXHJcbiAgICAgICAgICAgICAgbmFtZTogJ+a4hemZpOaOkuW6jydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdzb3J0QXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5Y2H5bqPJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZTogJ3NvcnREZXNjJyxcclxuICAgICAgICAgICAgICBuYW1lOiAn5YCS5bqPJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29kZTogJ2V4cG9ydEFsbCcsXHJcbiAgICAgICAgICBuYW1lOiAn5a+85Ye65pWw5o2uLmNzdidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVYQ0VMX01FVEhPRFNfTkFNRSB7XHJcbiAgQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UID0gJ2NvbnRleHRNZW51Q2xpY2tFdmVudCcsXHJcbiAgQ0VMTF9TUEFOX01FVEhPRCA9ICdjZWxsU3Bhbk1ldGhvZCdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSB2RXhjZWxEYXRhIHtcclxuICBleGNlbFN0b3JlOiB7XHJcbiAgICB1cGxvYWRSb3dzOiBBcnJheTxhbnk+O1xyXG4gIH1cclxuICBtZXJnZVN0b3JlOiB7XHJcbiAgICBjb2xMaXN0OiBBcnJheTxhbnk+O1xyXG4gICAgcm93TGlzdDogQXJyYXk8YW55PjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50ICh7IFZ1ZSwgVGFibGUgfTogYW55KSB7XHJcbiAgY29uc3QgRXhjZWw6IGFueSA9IHtcclxuICAgIG5hbWU6ICdWeGVFeGNlbCcsXHJcbiAgICBwcm9wczoge1xyXG4gICAgICBjb2x1bW5zOiBBcnJheVxyXG4gICAgfSxcclxuICAgIGRhdGEgKCkge1xyXG4gICAgICBsZXQgZGF0YTogdkV4Y2VsRGF0YSA9IHtcclxuICAgICAgICBleGNlbFN0b3JlOiB7XHJcbiAgICAgICAgICB1cGxvYWRSb3dzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVyZ2VTdG9yZToge1xyXG4gICAgICAgICAgY29sTGlzdDogW10sXHJcbiAgICAgICAgICByb3dMaXN0OiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgIHRhYmxlUHJvcHMgKHRoaXM6IGFueSk6IGFueSB7XHJcbiAgICAgICAgbGV0IHsgJHByb3BzLCBlZGl0Q29uZmlnLCBzb3J0Q29uZmlnLCBmaWx0ZXJDb25maWcgfSA9IHRoaXNcclxuICAgICAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sICRwcm9wcywge1xyXG4gICAgICAgICAgYm9yZGVyOiB0cnVlLFxyXG4gICAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgc2hvd092ZXJmbG93OiBudWxsLFxyXG4gICAgICAgICAgLy8gc3Bhbk1ldGhvZDogdGhpcy5jZWxsU3Bhbk1ldGhvZCxcclxuICAgICAgICAgIGNvbnRleHRNZW51OiBleGNlbENvbnRleHRNZW51LFxyXG4gICAgICAgICAgbW91c2VDb25maWc6IHsgc2VsZWN0ZWQ6IHRydWUsIGNoZWNrZWQ6IHRydWUgfSxcclxuICAgICAgICAgIGtleWJvYXJkQ29uZmlnOiB7IGlzQXJyb3c6IHRydWUsIGlzRGVsOiB0cnVlLCBpc0VudGVyOiB0cnVlLCBpc1RhYjogdHJ1ZSwgaXNDdXQ6IHRydWUsIGlzRWRpdDogdHJ1ZSB9LFxyXG4gICAgICAgICAgZWRpdENvbmZpZzogT2JqZWN0LmFzc2lnbih7fSwgZXhjZWxFZGl0Q29uZmlnLCBlZGl0Q29uZmlnKSxcclxuICAgICAgICAgIHNvcnRDb25maWc6IE9iamVjdC5hc3NpZ24oeyBzaG93SWNvbjogZmFsc2UgfSwgc29ydENvbmZpZyksXHJcbiAgICAgICAgICBmaWx0ZXJDb25maWc6IE9iamVjdC5hc3NpZ24oeyBzaG93SWNvbjogZmFsc2UgfSwgZmlsdGVyQ29uZmlnKSxcclxuICAgICAgICAgIG9wdGltaXphdGlvbjoge1xyXG4gICAgICAgICAgICBzY3JvbGxYOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY3JvbGxZOiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IDEwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhdGNoOiB7XHJcbiAgICAgIGNvbHVtbnMgKHRoaXM6IGFueSwgdmFsdWU6IEFycmF5PGFueT4pIHtcclxuICAgICAgICB0aGlzLmxvYWRDb2x1bW4odmFsdWUpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkICh0aGlzOiBhbnkpIHtcclxuICAgICAgbGV0IHsgY29sdW1ucyB9ID0gdGhpc1xyXG4gICAgICBpZiAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubG9hZENvbHVtbih0aGlzLmNvbHVtbnMpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW5kZXIgKHRoaXM6IGFueSwgaDogRnVuY3Rpb24pIHtcclxuICAgICAgbGV0IHsgJHNsb3RzLCAkbGlzdGVuZXJzLCB0YWJsZVByb3BzIH0gPSB0aGlzXHJcbiAgICAgIHJldHVybiBoKCd2eGUtdGFibGUnLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtZXhjZWwnLFxyXG4gICAgICAgIHByb3BzOiB0YWJsZVByb3BzLFxyXG4gICAgICAgIG9uOiBYRVV0aWxzLmFzc2lnbih7fSwgJGxpc3RlbmVycywge1xyXG4gICAgICAgICAgJ2NvbnRleHQtbWVudS1jbGljayc6IHRoaXMuY29udGV4dE1lbnVDbGlja0V2ZW50XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgcmVmOiAneFRhYmxlJ1xyXG4gICAgICB9LCAkc2xvdHMuZGVmYXVsdClcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgIFtFWENFTF9NRVRIT0RTX05BTUUuQ09OVEVYVF9NRU5VX0NMSUNLX0VWRU5UXSAodGhpczogYW55LCB7IG1lbnUsIHJvdywgY29sdW1uIH06IGFueSwgZXZudDogYW55KSB7XHJcbiAgICAgICAgbGV0ICR0YWJsZSA9IHRoaXMuJHJlZnMueFRhYmxlXHJcbiAgICAgICAgbGV0IHsgcHJvcGVydHkgfSA9IGNvbHVtblxyXG4gICAgICAgIHN3aXRjaCAobWVudS5jb2RlKSB7XHJcbiAgICAgICAgICBjYXNlICdjbGlwJzpcclxuICAgICAgICAgICAgJHRhYmxlLmhhbmRsZUNvcHllZCh0cnVlLCBldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY29weSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVDb3B5ZWQoZmFsc2UsIGV2bnQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdwYXN0ZSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5oYW5kbGVQYXN0ZShldm50KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcclxuICAgICAgICAgICAgJHRhYmxlLmluc2VydEF0KHt9LCByb3cpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdyZW1vdmUnOlxyXG4gICAgICAgICAgICAkdGFibGUucmVtb3ZlKHJvdylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRGF0YSc6XHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckRhdGEocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NsZWFyRmlsdGVyJzpcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFyRmlsdGVyKGNvbHVtbilcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2ZpbHRlclNlbGVjdCc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zZXRGaWx0ZXIoY29sdW1uLCBbXHJcbiAgICAgICAgICAgICAgeyBkYXRhOiBYRVV0aWxzLmdldChyb3csIHByb3BlcnR5KSwgY2hlY2tlZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICR0YWJsZS51cGRhdGVEYXRhKClcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFySW5kZXhDaGVja2VkKClcclxuICAgICAgICAgICAgJHRhYmxlLmNsZWFySGVhZGVyQ2hlY2tlZCgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckNoZWNrZWQoKVxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJTZWxlY3RlZCgpXHJcbiAgICAgICAgICAgICR0YWJsZS5jbGVhckNvcHllZCgpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdjbGVhclNvcnQnOlxyXG4gICAgICAgICAgICAkdGFibGUuY2xlYXJTb3J0KClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3NvcnRBc2MnOlxyXG4gICAgICAgICAgICAkdGFibGUuc29ydChwcm9wZXJ0eSwgJ2FzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdzb3J0RGVzYyc6XHJcbiAgICAgICAgICAgICR0YWJsZS5zb3J0KHByb3BlcnR5LCAnZGVzYycpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdleHBvcnRBbGwnOlxyXG4gICAgICAgICAgICAkdGFibGUuZXhwb3J0RGF0YSh7IGlzSGVhZGVyOiBmYWxzZSB9KVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICBjb25zdCB7IGNvbHVtbnMsIHJvd3MgfSA9ICR0YWJsZS5nZXRNb3VzZUNoZWNrZWRzKClcclxuICAgICAgICAgICAgY29uc3QgeyBjb2xMaXN0LCByb3dMaXN0IH0gPSB0aGlzLm1lcmdlU3RvcmVcclxuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4gcm93TGlzdC5pbmRleE9mKHJvdykgPT09IC0xID8gcm93TGlzdC5wdXNoKHJvdykgOiAwKVxyXG4gICAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBhbnkpID0+IGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID09PSAtMSA/IGNvbExpc3QucHVzaChjb2x1bW4pIDogMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgW0VYQ0VMX01FVEhPRFNfTkFNRS5DRUxMX1NQQU5fTUVUSE9EXSAodGhpczogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGxldCB7IHJvdywgJHJvd0luZGV4LCBjb2x1bW4sIGRhdGEgfSA9IHBhcmFtc1xyXG4gICAgICAgIGNvbnN0IHsgY29sTGlzdCwgcm93TGlzdCB9ID0gdGhpcy5tZXJnZVN0b3JlXHJcbiAgICAgICAgaWYgKGNvbExpc3QuaW5kZXhPZihjb2x1bW4pID4gLTEpIHtcclxuICAgICAgICAgIGxldCBwcmV2Um93ID0gZGF0YVskcm93SW5kZXggLSAxXVxyXG4gICAgICAgICAgbGV0IG5leHRSb3cgPSBkYXRhWyRyb3dJbmRleCArIDFdXHJcbiAgICAgICAgICBsZXQgaXNNZXJnZWQgPSByb3dMaXN0LmluZGV4T2Yocm93KSA+IC0xXHJcbiAgICAgICAgICBpZiAocHJldlJvdyAmJiBpc01lcmdlZCAmJiByb3dMaXN0LmluZGV4T2YocHJldlJvdykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiAwLCBjb2xzcGFuOiAwIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudFJvd3NwYW4gPSAxXHJcbiAgICAgICAgICAgIGlmIChpc01lcmdlZCkge1xyXG4gICAgICAgICAgICAgIHdoaWxlIChuZXh0Um93ICYmIHJvd0xpc3QuaW5kZXhPZihuZXh0Um93KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0Um93ID0gZGF0YVsrK2NvdW50Um93c3BhbiArICRyb3dJbmRleF1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvdW50Um93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICByZXR1cm4geyByb3dzcGFuOiBjb3VudFJvd3NwYW4sIGNvbHNwYW46IDEgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOe7p+aJvyBUYWJsZVxyXG4gIFhFVXRpbHMuYXNzaWduKEV4Y2VsLnByb3BzLCBUYWJsZS5wcm9wcylcclxuICBYRVV0aWxzLmVhY2goVGFibGUubWV0aG9kcywgKGNiOiBGdW5jdGlvbiwgbmFtZTogRVhDRUxfTUVUSE9EU19OQU1FKSA9PiB7XHJcbiAgICBFeGNlbC5tZXRob2RzW25hbWVdID0gZnVuY3Rpb24gKHRoaXM6IGFueSkge1xyXG4gICAgICByZXR1cm4gdGhpcy4kcmVmcy54VGFibGVbbmFtZV0uYXBwbHkodGhpcy4kcmVmcy54VGFibGUsIGFyZ3VtZW50cylcclxuICAgIH1cclxuICB9KVxyXG4gIFZ1ZS5jb21wb25lbnQoRXhjZWwubmFtZSwgRXhjZWwpXHJcbn1cclxuXHJcbmNvbnN0IHJvd0hlaWdodDogbnVtYmVyID0gMjRcclxuXHJcbmludGVyZmFjZSBwb3NSYW5nZURhdGEge1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBzdGFydDogbnVtYmVyO1xyXG4gIGVuZDogbnVtYmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbiAodGV4dGFyZWE6IGFueSk6IHBvc1JhbmdlRGF0YSB7XHJcbiAgbGV0IHJhbmdlRGF0YTogcG9zUmFuZ2VEYXRhID0geyB0ZXh0OiAnJywgc3RhcnQ6IDAsIGVuZDogMCB9XHJcbiAgaWYgKHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICByYW5nZURhdGEuc3RhcnQgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydFxyXG4gICAgcmFuZ2VEYXRhLmVuZCA9IHRleHRhcmVhLnNlbGVjdGlvbkVuZFxyXG4gIH1cclxuICByZXR1cm4gcmFuZ2VEYXRhXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEN1cnNvclBvc2l0aW9uICh0ZXh0YXJlYTogYW55LCByYW5nZURhdGE6IHBvc1JhbmdlRGF0YSkge1xyXG4gIGlmICh0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgdGV4dGFyZWEuZm9jdXMoKVxyXG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocmFuZ2VEYXRhLnN0YXJ0LCByYW5nZURhdGEuZW5kKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOa4suafk+WHveaVsFxyXG4gKi9cclxuY29uc3QgcmVuZGVyTWFwID0ge1xyXG4gIGNlbGw6IHtcclxuICAgIGF1dG9mb2N1czogJ3RleHRhcmVhJyxcclxuICAgIHJlbmRlckVkaXQgKGg6IEZ1bmN0aW9uLCBlZGl0UmVuZGVyOiBhbnksIHBhcmFtczogYW55LCB7ICRleGNlbCB9OiBhbnkpIHtcclxuICAgICAgbGV0IHsgZXhjZWxTdG9yZSB9ID0gJGV4Y2VsXHJcbiAgICAgIGxldCB7IHVwbG9hZFJvd3MgfSA9IGV4Y2VsU3RvcmVcclxuICAgICAgbGV0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICBsZXQgeyBtb2RlbCB9ID0gY29sdW1uXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgY2xhc3M6ICd2eGUtdGV4dGFyZWEgdnhlLWV4Y2VsLWNlbGwnLFxyXG4gICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtjb2x1bW4ucmVuZGVySGVpZ2h0fXB4YFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIFtcclxuICAgICAgICAgIGgoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS10ZXh0YXJlYS0taW5uZXInLFxyXG4gICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiBgJHtjb2x1bW4ucmVuZGVyV2lkdGh9cHhgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgaW5wdXQgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucEVsZW0gPSBldm50LnRhcmdldFxyXG4gICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFsdWUgPSBpbnBFbGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wRWxlbS5zY3JvbGxIZWlnaHQgPiBpbnBFbGVtLm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUm93cy5pbmRleE9mKHJvdykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wRWxlbS5zdHlsZS53aWR0aCA9IGAke2lucEVsZW0ub2Zmc2V0V2lkdGggKyAyMH1weGBcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAke2lucEVsZW0uc2Nyb2xsSGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaGFuZ2UgKGV2bnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJvd3MuaW5kZXhPZihyb3cpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGxvYWRSb3dzLnB1c2gocm93KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAga2V5ZG93biAoZXZudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wRWxlbSA9IGV2bnQudGFyZ2V0XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZudC5hbHRLZXkgJiYgZXZudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICBldm50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgZXZudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VEYXRhID0gZ2V0Q3Vyc29yUG9zaXRpb24oaW5wRWxlbSlcclxuICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IHJhbmdlRGF0YS5lbmRcclxuICAgICAgICAgICAgICAgICAgbGV0IGNlbGxWYWx1ZSA9IGlucEVsZW0udmFsdWVcclxuICAgICAgICAgICAgICAgICAgY2VsbFZhbHVlID0gYCR7Y2VsbFZhbHVlLnNsaWNlKDAsIHBvcyl9XFxuJHtjZWxsVmFsdWUuc2xpY2UocG9zLCBjZWxsVmFsdWUubGVuZ3RoKX1gXHJcbiAgICAgICAgICAgICAgICAgIGlucEVsZW0udmFsdWUgPSBjZWxsVmFsdWVcclxuICAgICAgICAgICAgICAgICAgbW9kZWwudXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGNlbGxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICBpbnBFbGVtLnN0eWxlLmhlaWdodCA9IGAkeyhNYXRoLmZsb29yKGlucEVsZW0ub2Zmc2V0SGVpZ2h0IC8gcm93SGVpZ2h0KSArIDEpICogcm93SGVpZ2h0fXB4YFxyXG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZURhdGEuc3RhcnQgPSByYW5nZURhdGEuZW5kID0gKytwb3NcclxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJzb3JQb3NpdGlvbihpbnBFbGVtLCByYW5nZURhdGEpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIF0pXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICByZW5kZXJDZWxsIChoOiBGdW5jdGlvbiwgZWRpdFJlbmRlcjogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgICBsZXQgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGRvbVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlubmVySFRNTDogWEVVdGlscy5lc2NhcGUoWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOWunueOsOeugOWNleeahOiZmuaLn+agkeihqOagvFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luVmlydHVhbFRyZWUgPSB7XHJcbiAgaW5zdGFsbCAoeHRhYmxlOiB0eXBlb2YgVlhFVGFibGUpIHtcclxuICAgIGxldCB7IHJlbmRlcmVyLCB2IH0gPSB4dGFibGVcclxuICAgIGlmICh2ID09PSAndjEnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignW3Z4ZS10YWJsZS1wbHVnaW4tdmlydHVhbC10cmVlXSA+PSBWMiB2ZXJzaW9uIGlzIHJlcXVpcmVkLicpXHJcbiAgICB9XHJcbiAgICAvLyDmt7vliqDliLDmuLLmn5PlmahcclxuICAgIHJlbmRlcmVyLm1peGluKHJlbmRlck1hcClcclxuICAgIC8vIOazqOWGjOe7hOS7tlxyXG4gICAgcmVnaXN0ZXJDb21wb25lbnQoeHRhYmxlKVxyXG4gIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WWEVUYWJsZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZSlcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5WaXJ0dWFsVHJlZVxyXG4iXX0=
